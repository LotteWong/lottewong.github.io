<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>LotteWong</title>
  
  <subtitle>åœ¨ä»£ç ç¬¦å·è¡¨è±¡ä¸­é¿éš¾ã€‚</subtitle>
  <link href="http://yoursite.com/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2021-07-22T15:06:50.600Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>LotteWong</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>#Others# å’Œæ–°é¡¹ç›®ç›¸çˆ±ç›¸æ€</title>
    <link href="http://yoursite.com/2021/07/24/%E5%92%8C%E6%96%B0%E9%A1%B9%E7%9B%AE%E7%9B%B8%E7%88%B1%E7%9B%B8%E6%9D%80/"/>
    <id>http://yoursite.com/2021/07/24/%E5%92%8C%E6%96%B0%E9%A1%B9%E7%9B%AE%E7%9B%B8%E7%88%B1%E7%9B%B8%E6%9D%80/</id>
    <published>2021-07-23T23:21:00.000Z</published>
    <updated>2021-07-22T15:06:50.600Z</updated>
    
    <content type="html"><![CDATA[<p>å¤¸å¼ çš„ä¿®è¾æ‰‹æ³•.jpgï¼ˆï¼ˆï¼ˆ Happy 7*24 Day ğŸ¤Ÿ</p><hr><a id="more"></a><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a><strong>å‰è¨€</strong></h1><blockquote><p>æ¥ä½ ğŸ§æ­£å¼æ‰“å·¥ä¸çŸ¥ä¸è§‰å·²ç»åå¤©äº†ï¼Œæ¯”èµ·å®ä¹ çš„æ—¶å€™å·¥ä½œå†…å®¹å·²ç»å¤§æœ‰ä¸åŒï¼Œå†è§å·²æ˜¯<strong>å·¥å…·äººå°é»„bot</strong>ï¼ˆæ­¤å·¥å…·äººéå½¼å·¥å…·äººthxã€‚</p><p>ä»Šå¤©ä¸»è¦è®°å½•ä¸€ä¸‹ç†è§£å’Œç†Ÿæ‚‰æ–°é¡¹ç›®çš„è¿‡ç¨‹ï¼Œå¸Œæœ›åœ¨æœªæ¥æ¥è§¦æ–°ä¸šåŠ¡ä¹Ÿä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p></blockquote><h1 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a><strong>å‰ç½®æ¡ä»¶</strong></h1><blockquote><p>æœ¬äººå¸èŒ <code>Golang</code> åå°å¼€å‘ï¼Œä¸‹é¢å†…å®¹ä»…ä¾›å‚è€ƒã€‚</p></blockquote><h2 id="ç¼–ç¨‹è¯­è¨€"><a href="#ç¼–ç¨‹è¯­è¨€" class="headerlink" title="ç¼–ç¨‹è¯­è¨€"></a>ç¼–ç¨‹è¯­è¨€</h2><ol><li><code>Golang</code>ï¼šä¸šåŠ¡å¼€å‘çš„ä¸»è¦è¯­è¨€</li><li><code>Shell</code>ï¼šå·¥å…·è¿ç»´çš„ä¸»è¦è¯­è¨€</li></ol><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><ol><li><code>Git</code>ã€<code>Linux</code></li><li>äº‘è®¡ç®—ã€é«˜å¹¶å‘ã€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡</li><li>ç®—æ³•åˆ†æã€æ•°æ®ç»“æ„</li><li>è®¡ç®—æœºç½‘ç»œã€æ“ä½œç³»ç»Ÿã€æ•°æ®åº“æ¦‚è®º</li><li>è®¾è®¡æ¨¡å¼ã€è½¯ä»¶æ¶æ„</li><li>æ•æ·å¼€å‘ã€é¡¹ç›®ç®¡ç†</li></ol><h2 id="å¼€å‘æ¡†æ¶"><a href="#å¼€å‘æ¡†æ¶" class="headerlink" title="å¼€å‘æ¡†æ¶"></a>å¼€å‘æ¡†æ¶</h2><ol><li><code>gin</code>ï¼šåŸºäº API</li><li><code>go-micro</code>ï¼šåŸºäºå¾®æœåŠ¡</li></ol><h2 id="æ•°æ®åº“æ“ä½œåŠé©±åŠ¨"><a href="#æ•°æ®åº“æ“ä½œåŠé©±åŠ¨" class="headerlink" title="æ•°æ®åº“æ“ä½œåŠé©±åŠ¨"></a>æ•°æ®åº“æ“ä½œåŠé©±åŠ¨</h2><ol><li><code>MySQL</code>ï¼šå…³ç³»å‹æ•°æ®åº“</li><li><code>MongoDB</code>ï¼šæ–‡æ¡£å‹æ•°æ®åº“</li><li><code>Redis</code>ï¼šé”®å€¼å‹æ•°æ®åº“</li></ol><h2 id="å…¶å®ƒçš„ä¸­é—´ä»¶"><a href="#å…¶å®ƒçš„ä¸­é—´ä»¶" class="headerlink" title="å…¶å®ƒçš„ä¸­é—´ä»¶"></a>å…¶å®ƒçš„ä¸­é—´ä»¶</h2><ol><li>æ¶ˆæ¯é˜Ÿåˆ—</li><li>æ³¨å†Œä¸­å¿ƒ</li></ol><h2 id="ç›¸å…³ç³»ç»Ÿ"><a href="#ç›¸å…³ç³»ç»Ÿ" class="headerlink" title="ç›¸å…³ç³»ç»Ÿ"></a>ç›¸å…³ç³»ç»Ÿ</h2><ol><li><code>upstream</code>ï¼šå¯¹æ¥å†…éƒ¨äº§å“</li><li><code>downstream</code>ï¼šå‰ç«¯é¡¹ç›®</li></ol><h2 id="è¿­ä»£æµç¨‹"><a href="#è¿­ä»£æµç¨‹" class="headerlink" title="è¿­ä»£æµç¨‹"></a>è¿­ä»£æµç¨‹</h2><ol><li><code>Unit Test</code>ã€<code>Mock Test</code></li><li><code>Coding Standard</code></li><li><code>CI / CD</code></li></ol><h1 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a><strong>éœ€æ±‚åˆ†æ</strong></h1><blockquote><p>éœ€æ±‚åˆ†æé˜¶æ®µä¸»è¦æ˜¯ä»éœ€æ±‚å±‚é¢æ¥äº†è§£é¡¹ç›®ï¼Œ<strong>çŸ¥é“é¡¹ç›®åœ¨åšä»€ä¹ˆ</strong>ã€‚</p></blockquote><h2 id="å¯ç”¨èµ„äº§"><a href="#å¯ç”¨èµ„äº§" class="headerlink" title="å¯ç”¨èµ„äº§"></a>å¯ç”¨èµ„äº§</h2><ol><li>äº§å“æ‰‹å†Œ</li><li>äº§å“åŸå‹</li><li>éœ€æ±‚æ–‡æ¡£</li></ol><h2 id="é˜¶æ®µç›®æ ‡"><a href="#é˜¶æ®µç›®æ ‡" class="headerlink" title="é˜¶æ®µç›®æ ‡"></a>é˜¶æ®µç›®æ ‡</h2><ol><li>ç†è§£å’ŒåŒºåˆ†å…³é”®çš„<strong>é¢†åŸŸæ¦‚å¿µ</strong></li><li>æ˜ç¡®äº§å“çš„<strong>ä¸»è¦åŠŸèƒ½å’Œä¸»è¦æµç¨‹</strong></li></ol><h1 id="æ–¹æ¡ˆè®¾è®¡"><a href="#æ–¹æ¡ˆè®¾è®¡" class="headerlink" title="æ–¹æ¡ˆè®¾è®¡"></a><strong>æ–¹æ¡ˆè®¾è®¡</strong></h1><blockquote><p>æ–¹æ¡ˆè®¾è®¡é˜¶æ®µä¸»è¦æ˜¯ä»æ–¹æ¡ˆå±‚é¢æ¥è§£æ„é¡¹ç›®ï¼Œ<strong>æ€è€ƒé¡¹ç›®è¯¥æ€ä¹ˆåš</strong>ã€‚</p></blockquote><h2 id="å¯ç”¨èµ„äº§-1"><a href="#å¯ç”¨èµ„äº§-1" class="headerlink" title="å¯ç”¨èµ„äº§"></a>å¯ç”¨èµ„äº§</h2><ol><li>æŠ€æœ¯æ–‡æ¡£</li><li>æ¥å£æ–‡æ¡£</li><li>æ•°æ®åº“è¡¨</li></ol><h2 id="é˜¶æ®µç›®æ ‡-1"><a href="#é˜¶æ®µç›®æ ‡-1" class="headerlink" title="é˜¶æ®µç›®æ ‡"></a>é˜¶æ®µç›®æ ‡</h2><ol><li>æ•´ç†é¡¹ç›®çš„<strong>æ•´ä½“è®¾è®¡</strong>ï¼ˆé¡¹ç›®æœ¬èº«ï¼‰ï¼ŒåŒ…æ‹¬åŠŸèƒ½ã€æ¶æ„å’Œæµç¨‹</li><li>æ•´ç†é¡¹ç›®çš„<strong>å±€éƒ¨è®¾è®¡</strong>ï¼ˆå¯¹åº”ç‰¹å®šåœºæ™¯çš„å…·ä½“è§£å†³æ–¹æ¡ˆï¼‰ï¼ŒåŒ…æ‹¬åŠŸèƒ½ã€æ¶æ„å’Œæµç¨‹</li><li>äº†è§£<strong>æ¥å£æ–‡æ¡£ï¼ˆ<code>dto</code>ï¼‰</strong>å¦‚ä½•ä¸ä¸šåŠ¡ç›¸ç»“åˆèµ·æ¥</li><li>äº†è§£<strong>æ•°æ®åº“è¡¨ï¼ˆ<code>po</code>ï¼‰</strong>å¦‚ä½•ä¸ä¸šåŠ¡ç›¸ç»“åˆèµ·æ¥</li></ol><h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a><strong>ä»£ç å®ç°</strong></h1><blockquote><p>ä»£ç å®ç°é˜¶æ®µä¸»è¦æ˜¯ä»ä»£ç å±‚é¢æ¥è½å®é¡¹ç›®ï¼Œ<strong>æœ‰ä¾æ®åœ°æå¥½ç»†èŠ‚</strong>ã€‚</p></blockquote><h2 id="å¯ç”¨èµ„äº§-2"><a href="#å¯ç”¨èµ„äº§-2" class="headerlink" title="å¯ç”¨èµ„äº§"></a>å¯ç”¨èµ„äº§</h2><ol><li>é¡¹ç›®ä»£ç </li></ol><h2 id="é˜¶æ®µç›®æ ‡-2"><a href="#é˜¶æ®µç›®æ ‡-2" class="headerlink" title="é˜¶æ®µç›®æ ‡"></a>é˜¶æ®µç›®æ ‡</h2><ol><li><strong>æ¢³ç†é¡¹ç›®ä»£ç å±‚æ¬¡</strong>ï¼Œæ¯”å¦‚ <code>router</code>ã€<code>api controller/cron job/message queue</code>ã€<code>service</code>ã€<code>dao/driver</code> ç­‰ç­‰</li><li>å¯¹åº”éœ€æ±‚å’Œæ–¹æ¡ˆï¼Œä» <code>api controller/cron job/message queue</code> æ¥å…¥æ‰‹ï¼Œ<strong>å·©å›ºç†è§£ä¸šåŠ¡ï¼Œäº†è§£å®ç°ç»†èŠ‚</strong></li><li>é‡åˆ°<strong>å¤æ‚ä¸”æ ¸å¿ƒçš„ä»£ç </strong>ï¼Œå¯ç”»æµç¨‹å›¾ç­‰ä¸“é—¨è®°å½•å’Œåˆ†æ</li></ol><h1 id="æ¨¡æ‹Ÿå¼€å‘"><a href="#æ¨¡æ‹Ÿå¼€å‘" class="headerlink" title="æ¨¡æ‹Ÿå¼€å‘"></a><strong>æ¨¡æ‹Ÿå¼€å‘</strong></h1><blockquote><p>æ¨¡æ‹Ÿå¼€å‘é˜¶æ®µä¸»è¦æ˜¯ä»å®è·µå±‚é¢æ¥è¿è¡Œé¡¹ç›®ï¼Œ<strong>è¿‡ä¸€éå·¥ä½œçš„æµç¨‹</strong>ã€‚</p></blockquote><h2 id="å¯ç”¨èµ„äº§-3"><a href="#å¯ç”¨èµ„äº§-3" class="headerlink" title="å¯ç”¨èµ„äº§"></a>å¯ç”¨èµ„äº§</h2><ol><li>é¡¹ç›®ä»£ç </li><li>ç¯å¢ƒä¿¡æ¯</li></ol><h2 id="é˜¶æ®µç›®æ ‡-3"><a href="#é˜¶æ®µç›®æ ‡-3" class="headerlink" title="é˜¶æ®µç›®æ ‡"></a>é˜¶æ®µç›®æ ‡</h2><ol><li>æœ¬åœ°å’Œè¿œç¨‹å¯ä»¥<strong>è·‘é€šé¡¹ç›®ä»£ç </strong></li><li><strong>ç†Ÿæ‚‰å®Œæ•´çš„å¼€å‘æµç¨‹</strong>ï¼šç¼–å†™æ–‡æ¡£ â†’ ç”Ÿæˆä»£ç  â†’ ä¸šåŠ¡å¼€å‘ â†’ å•å…ƒæµ‹è¯• â†’ ä»£ç è§„èŒƒ â†’ æäº¤ä»£ç  â†’ ä»£ç è¯„å®¡ â†’ åˆå…¥ä»£ç  â†’ ä»£ç æ‰“åŒ… â†’ éƒ¨ç½² â†’ æµ‹è¯•</li></ol><h1 id="ä»£ç é‡æ„"><a href="#ä»£ç é‡æ„" class="headerlink" title="ä»£ç é‡æ„"></a><strong>ä»£ç é‡æ„</strong></h1><blockquote><p>ä»£ç é‡æ„é˜¶æ®µä¸»è¦æ˜¯ä»ç†æƒ³å±‚é¢æ¥ä¼˜åŒ–é¡¹ç›®ï¼Œ<strong>æå‡è‡ªå·±å’Œæ–°é¡¹ç›®</strong>ã€‚</p></blockquote><h2 id="å¯ç”¨èµ„äº§-4"><a href="#å¯ç”¨èµ„äº§-4" class="headerlink" title="å¯ç”¨èµ„äº§"></a>å¯ç”¨èµ„äº§</h2><ol><li>é¡¹ç›®ä»£ç </li></ol><h2 id="é˜¶æ®µç›®æ ‡-4"><a href="#é˜¶æ®µç›®æ ‡-4" class="headerlink" title="é˜¶æ®µç›®æ ‡"></a>é˜¶æ®µç›®æ ‡</h2><ol><li><strong>å­¦ä¹ æˆ–æ”¹è¿›</strong>é¡¹ç›®ä»£ç ï¼Œå¤§åˆ°æ¶æ„æ¨¡å¼ï¼Œå°åˆ°ç®—æ³•ç»“æ„ï¼ŒåŒæ—¶ä¹Ÿè¦å…³æ³¨ä»£ç è§„èŒƒ</li></ol><h1 id="è‡´è°¢"><a href="#è‡´è°¢" class="headerlink" title="è‡´è°¢"></a><strong>è‡´è°¢</strong></h1><blockquote><p>æ„Ÿè°¢æ™“æ¸…å“¥æˆä¸ºæˆ‘çš„ä¼¯ä¹ï¼Œè®©æˆ‘æœ‰æœºä¼šåœ¨å–œæ¬¢çš„åœ°æ–¹åšå–œæ¬¢çš„äº‹æƒ…ï¼Œåœ¨å·¥ä½œä¸­å’Œç”Ÿæ´»ä¸Šä¹Ÿç»™äº†æˆ‘å¾ˆå¤šé¼“åŠ±ï¼›æ„Ÿè°¢é£å“¥åœ¨æˆ‘å›æ¥ä¹‹åä¾ç„¶è®©æˆ‘è§‰å¾—å¯¹è¿™é‡Œå¾ˆæœ‰å½’å±æ„Ÿï¼Œé£å“¥ä¹Ÿä¼šä¸€ç›´æ˜¯æˆ‘çš„æ¦œæ ·ï¼ˆin every aspectï¼›æ„Ÿè°¢è¿œå“¥ï¼Œäº¦å¸ˆäº¦å‹ï¼Œä¸ºå…¨ä¸–ç•Œå å¥½çš„ mentor æ‰“ callï¼›æ„Ÿè°¢å„ä½ä¸å«Œå¼ƒæˆ‘èœçš„åŒäº‹ï¼Œæœ‰ä½ ä»¬åœ¨ï¼Œæœ‰é£å“¥é€‰çš„ Macbook Proï¼Œæœ‰æ™ºç¥é€çš„ Windowsï¼Œæ¯å¤©åˆ°äº†å·¥ä½éƒ½è§‰å¾—è¿™ä¸€åˆ»ä¸€å®šè¦ä¸º HK0700 å–å‘½ï¼ˆbushiã€‚</p><p>ä¸Šä¸€æ¬¡åˆ†åˆ«æ—¶ï¼Œå…¶å®è‡ªå·±æ„Ÿåˆ°è›®æœ‰å‹åŠ›ï¼Œä¸€æ–¹é¢æ‹…å¿ƒè¦è¢«ç‚’é±¿é±¼äº†ï¼ˆç°åœ¨ä¹Ÿï¼Œå¦ä¸€æ–¹é¢æ˜¯å› ä¸ºæœ‰å¶åƒåŒ…è¢±ï¼ˆxså¼€å§‹ç»™è‡ªå·±åŠ æˆã€‚<strong>ä½†æ˜¯æ— è®ºå¦‚ä½•åœ°è¯´ï¼Œæˆ‘æœ€åº”è¯¥åšçš„å°±æ˜¯â€”â€”å¥½å¥½å·¥ä½œ</strong>ã€‚åœ¨çƒ­çˆ±çš„äº‹ä¸šé‡Œå®ç°ä»·å€¼ï¼ˆæˆ‘æœ€å¥½æ˜¯ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›å¤§å®¶å› ä¸ºæˆ‘çš„å­˜åœ¨è€Œæ„Ÿåˆ°å¼€å¿ƒï¼ˆä¸€ä¸¢ä¸¢ä¹Ÿè¡Œï¼Œbtwæ„¿ä¸‹ä¸€æ¬¡æ²¡æœ‰åˆ†åˆ« :)</p></blockquote><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤¸å¼ çš„ä¿®è¾æ‰‹æ³•.jpgï¼ˆï¼ˆï¼ˆ Happy 7*24 Day ğŸ¤Ÿ&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Others" scheme="http://yoursite.com/categories/Others/"/>
    
    
  </entry>
  
  <entry>
    <title>#Shell Script# æ€ç»´å¯¼å›¾ï¼šShell Script</title>
    <link href="http://yoursite.com/2021/07/21/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BShell%20Script/"/>
    <id>http://yoursite.com/2021/07/21/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BShell%20Script/</id>
    <published>2021-07-20T23:00:21.000Z</published>
    <updated>2021-07-22T15:07:46.708Z</updated>
    
    <content type="html"><![CDATA[<p>å¤‡ä»½è®°å½• <code>Shell Script</code> çš„<strong>æ€ç»´å¯¼å›¾</strong>å’Œ<strong>ç›¸å…³æ–‡æ¡£</strong>ã€‚</p><hr><a id="more"></a><h1 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a><strong>æ€ç»´å¯¼å›¾</strong></h1><p><img src="/images/Shell_Script.png" alt="Shell Script Mindmap"></p><p><img src="/images/flag.png" alt="æµ‹è¯•æ ‡å¿—å›¾ç¤º"></p><h1 id="ç›¸å…³æ–‡æ¡£"><a href="#ç›¸å…³æ–‡æ¡£" class="headerlink" title="ç›¸å…³æ–‡æ¡£"></a><strong>ç›¸å…³æ–‡æ¡£</strong></h1><ul><li><a href="http://cn.linux.vbird.org/linux_basic/0340bashshell-scripts.php" target="_blank" rel="noopener">å­¦ä¹  shell scripts</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤‡ä»½è®°å½• &lt;code&gt;Shell Script&lt;/code&gt; çš„&lt;strong&gt;æ€ç»´å¯¼å›¾&lt;/strong&gt;å’Œ&lt;strong&gt;ç›¸å…³æ–‡æ¡£&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Mind Map" scheme="http://yoursite.com/categories/Mind-Map/"/>
    
    
    <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
    <category term="Shell" scheme="http://yoursite.com/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>#Bash# æ€ç»´å¯¼å›¾ï¼šBash å‘½ä»¤è¡Œ</title>
    <link href="http://yoursite.com/2021/07/20/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BBash/"/>
    <id>http://yoursite.com/2021/07/20/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BBash/</id>
    <published>2021-07-19T23:00:21.000Z</published>
    <updated>2021-07-22T15:07:42.622Z</updated>
    
    <content type="html"><![CDATA[<p>å¤‡ä»½è®°å½• <code>Bash</code> çš„<strong>æ€ç»´å¯¼å›¾</strong>å’Œ<strong>ç›¸å…³æ–‡æ¡£</strong>ã€‚</p><hr><a id="more"></a><h1 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a><strong>æ€ç»´å¯¼å›¾</strong></h1><p><img src="/images/Bash.png" alt="Bash Mindmap"></p><p><img src="/images/cfg.gif" alt="é…ç½®æ–‡ä»¶è¯»å–å›¾ç¤º"></p><p><img src="/images/var.jpg" alt="å˜é‡é…ç½®æ–¹å¼å›¾ç¤º"></p><h1 id="ç›¸å…³æ–‡æ¡£"><a href="#ç›¸å…³æ–‡æ¡£" class="headerlink" title="ç›¸å…³æ–‡æ¡£"></a><strong>ç›¸å…³æ–‡æ¡£</strong></h1><ul><li><a href="http://cn.linux.vbird.org/linux_basic/0320bash.php" target="_blank" rel="noopener">è®¤è¯†ä¸å­¦ä¹  BASH</a></li><li><a href="http://cn.linux.vbird.org/linux_basic/0330regularex.php" target="_blank" rel="noopener">æ­£è§„è¡¨ç¤ºæ³•ä¸æ–‡ä»¶æ ¼å¼åŒ–å¤„ç†</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤‡ä»½è®°å½• &lt;code&gt;Bash&lt;/code&gt; çš„&lt;strong&gt;æ€ç»´å¯¼å›¾&lt;/strong&gt;å’Œ&lt;strong&gt;ç›¸å…³æ–‡æ¡£&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Mind Map" scheme="http://yoursite.com/categories/Mind-Map/"/>
    
    
    <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
    <category term="Shell" scheme="http://yoursite.com/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>#Vim# æ€ç»´å¯¼å›¾ï¼šVim ç¼–è¾‘å™¨</title>
    <link href="http://yoursite.com/2021/07/19/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BVim/"/>
    <id>http://yoursite.com/2021/07/19/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BVim/</id>
    <published>2021-07-18T23:00:21.000Z</published>
    <updated>2021-07-22T15:07:31.558Z</updated>
    
    <content type="html"><![CDATA[<p>å¤‡ä»½è®°å½• <code>Vim</code> çš„<strong>æ€ç»´å¯¼å›¾</strong>å’Œ<strong>ç›¸å…³æ–‡æ¡£</strong>ã€‚</p><hr><a id="more"></a><h1 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a><strong>æ€ç»´å¯¼å›¾</strong></h1><p><img src="/images/Vim.png" alt="Vim Mindmap"></p><p><img src="/images/vi-mode.gif" alt="æ¨¡å¼å›¾ç¤º"></p><p><img src="/images/vim-commands.jpg" alt="å‘½ä»¤å›¾ç¤º"></p><h1 id="ç›¸å…³æ–‡æ¡£"><a href="#ç›¸å…³æ–‡æ¡£" class="headerlink" title="ç›¸å…³æ–‡æ¡£"></a><strong>ç›¸å…³æ–‡æ¡£</strong></h1><ul><li><a href="http://cn.linux.vbird.org/linux_basic/0310vi.php" target="_blank" rel="noopener">vimç¨‹åºç¼–è¾‘å™¨</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤‡ä»½è®°å½• &lt;code&gt;Vim&lt;/code&gt; çš„&lt;strong&gt;æ€ç»´å¯¼å›¾&lt;/strong&gt;å’Œ&lt;strong&gt;ç›¸å…³æ–‡æ¡£&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Mind Map" scheme="http://yoursite.com/categories/Mind-Map/"/>
    
    
    <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
    <category term="Vim" scheme="http://yoursite.com/tags/Vim/"/>
    
  </entry>
  
  <entry>
    <title>#Kubernetes# QCloudä¸Šçš„Kubernetesåˆä½“éªŒ</title>
    <link href="http://yoursite.com/2021/06/20/QCloud%E4%B8%8A%E7%9A%84Kubernetes%E5%AE%9E%E8%B7%B5/"/>
    <id>http://yoursite.com/2021/06/20/QCloud%E4%B8%8A%E7%9A%84Kubernetes%E5%AE%9E%E8%B7%B5/</id>
    <published>2021-06-19T23:00:21.000Z</published>
    <updated>2021-06-25T07:04:45.616Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨<strong>QCloud</strong>ä¸Šåˆ©ç”¨<strong>Kubernetes</strong>ç¼–æ’åº”ç”¨ä¸æœåŠ¡ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹<strong>å››ä¸ªéƒ¨åˆ†</strong>ï¼š</p><ul><li><strong>ç¯å¢ƒå‡†å¤‡ Environment</strong></li><li><strong>ç–‘éš¾è§£å†³ FAQ</strong></li><li>å…·ä½“æ¡ˆä¾‹ Cases</li><li>å‚è€ƒæ–‡çŒ® References</li></ul><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><h2 id="ç¯å¢ƒå‡†å¤‡-Environment"><a href="#ç¯å¢ƒå‡†å¤‡-Environment" class="headerlink" title="ç¯å¢ƒå‡†å¤‡ Environment"></a><strong>ç¯å¢ƒå‡†å¤‡ Environment</strong></h2><h3 id="æ›´æ–°ç³»ç»Ÿæºå’Œè½¯ä»¶åŒ…"><a href="#æ›´æ–°ç³»ç»Ÿæºå’Œè½¯ä»¶åŒ…" class="headerlink" title="æ›´æ–°ç³»ç»Ÿæºå’Œè½¯ä»¶åŒ…"></a>æ›´æ–°ç³»ç»Ÿæºå’Œè½¯ä»¶åŒ…</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get upgrade</span><br><span class="line">apt-get update</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹Dockeré…ç½®"><a href="#ä¿®æ”¹Dockeré…ç½®" class="headerlink" title="ä¿®æ”¹Dockeré…ç½®"></a>ä¿®æ”¹Dockeré…ç½®</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># ç¼–è¾‘dockeré…ç½®</span></span><br><span class="line">vim /etc/docker/daemon.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="hljs-string">"exe-opts"</span>: [<span class="hljs-string">"native.cgroupdriver=systemd"</span>], <span class="hljs-comment"># ä¿®æ”¹cgroup driveré€‰é¡¹ï¼Œä½¿dockerå’Œk8sä¸€è‡´</span></span><br><span class="line">  <span class="hljs-string">"registry-mirrors"</span>: [<span class="hljs-string">"https://registry.docker-cn.com"</span>] <span class="hljs-comment"># æ›¿æ¢æˆå›½å†…é•œåƒæº</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># é‡å¯dockeræœåŠ¡</span></span><br><span class="line">service docker restart æˆ– systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…Kuberneteså·¥å…·"><a href="#å®‰è£…Kuberneteså·¥å…·" class="headerlink" title="å®‰è£…Kuberneteså·¥å…·"></a>å®‰è£…Kuberneteså·¥å…·</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># å®‰è£…ä¾èµ–å·¥å…·</span></span><br><span class="line">apt-get install -y apt-transport-https</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># è·å–é˜¿é‡Œäº‘é•œåƒæºå¯†é’¥</span></span><br><span class="line">curl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add -</span><br><span class="line"><span class="hljs-built_in">echo</span> <span class="hljs-string">"deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main"</span> &gt; /etc/apt/sources.list.d/kubernetes.list</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># å®‰è£…k8så·¥å…·</span></span><br><span class="line">apt-get install -y kubelet kubeadm kubectl</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½Kubernetesé•œåƒ"><a href="#ä¸‹è½½Kubernetesé•œåƒ" class="headerlink" title="ä¸‹è½½Kubernetesé•œåƒ"></a>ä¸‹è½½Kubernetesé•œåƒ</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># æŸ¥çœ‹æ‰€éœ€é•œåƒåˆ—è¡¨</span></span><br><span class="line">kubeadm config images list</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ç¼–è¾‘ä¸‹è½½é•œåƒæ–‡ä»¶</span></span><br><span class="line">vim pull_k8s_images.sh</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ä»å›½å†…é•œåƒæºä¸­ä¸‹è½½é•œåƒå¹¶æ›¿æ¢æ ‡ç­¾</span></span><br><span class="line"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span>  `kubeadm config images list`;  <span class="hljs-keyword">do</span></span><br><span class="line">    imageName=<span class="hljs-variable">$&#123;i#k8s.gcr.io/&#125;</span></span><br><span class="line">    <span class="hljs-keyword">if</span> [ <span class="hljs-variable">$imageName</span> != <span class="hljs-string">"coredns/coredns:v1.8.0"</span> ]</span><br><span class="line">    <span class="hljs-keyword">then</span></span><br><span class="line">        docker pull registry.aliyuncs.com/google_containers/<span class="hljs-variable">$imageName</span></span><br><span class="line">        docker tag registry.aliyuncs.com/google_containers/<span class="hljs-variable">$imageName</span> k8s.gcr.io/<span class="hljs-variable">$imageName</span></span><br><span class="line">        docker rmi registry.aliyuncs.com/google_containers/<span class="hljs-variable">$imageName</span></span><br><span class="line">    <span class="hljs-keyword">else</span></span><br><span class="line">        docker pull coredns/coredns:1.8.0</span><br><span class="line">        docker tag coredns/coredns:1.8.0 k8s.gcr.io/<span class="hljs-variable">$imageName</span></span><br><span class="line">        docker rmi coredns/coredns:1.8.0</span><br><span class="line">    <span class="hljs-keyword">fi</span></span><br><span class="line"><span class="hljs-keyword">done</span>;</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–Kubernetesä¸»èŠ‚ç‚¹"><a href="#åˆå§‹åŒ–Kubernetesä¸»èŠ‚ç‚¹" class="headerlink" title="åˆå§‹åŒ–Kubernetesä¸»èŠ‚ç‚¹"></a>åˆå§‹åŒ–Kubernetesä¸»èŠ‚ç‚¹</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init \</span><br><span class="line">--service-cidr=10.1.0.0/16 --pod-network-cidr=10.244.0.0/16 <span class="hljs-comment"># è®¾ç½®ç½‘ç»œä¿¡æ¯</span></span><br><span class="line">--ignore-preflight-errors=NumCPU <span class="hljs-comment"># å…è®¸å•æ ¸è¿è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="åº”ç”¨Kubernetesé…ç½®"><a href="#åº”ç”¨Kubernetesé…ç½®" class="headerlink" title="åº”ç”¨Kubernetesé…ç½®"></a>åº”ç”¨Kubernetesé…ç½®</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="hljs-variable">$HOME</span>/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) <span class="hljs-variable">$HOME</span>/.kube/config</span><br><span class="line"><span class="hljs-built_in">export</span> KUBECONFIG=/etc/kubernetes/admin.conf</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½Kubernetesç½‘ç»œæ’ä»¶"><a href="#ä¸‹è½½Kubernetesç½‘ç»œæ’ä»¶" class="headerlink" title="ä¸‹è½½Kubernetesç½‘ç»œæ’ä»¶"></a>ä¸‹è½½Kubernetesç½‘ç»œæ’ä»¶</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br></pre></td></tr></table></figure><h3 id="å…è®¸ä¸»èŠ‚ç‚¹éƒ¨ç½²"><a href="#å…è®¸ä¸»èŠ‚ç‚¹éƒ¨ç½²" class="headerlink" title="å…è®¸ä¸»èŠ‚ç‚¹éƒ¨ç½²"></a>å…è®¸ä¸»èŠ‚ç‚¹éƒ¨ç½²</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl taint nodes --all node-role.kubernetes.io/master-</span><br></pre></td></tr></table></figure><h3 id="å…è®¸å‘½ä»¤è¡Œè¡¥å…¨"><a href="#å…è®¸å‘½ä»¤è¡Œè¡¥å…¨" class="headerlink" title="å…è®¸å‘½ä»¤è¡Œè¡¥å…¨"></a>å…è®¸å‘½ä»¤è¡Œè¡¥å…¨</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install bash-completion</span><br><span class="line"><span class="hljs-built_in">echo</span> <span class="hljs-string">"source &lt;(kubectl completion bash)"</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ˜¯å¦éƒ¨ç½²æˆåŠŸ"><a href="#æŸ¥çœ‹æ˜¯å¦éƒ¨ç½²æˆåŠŸ" class="headerlink" title="æŸ¥çœ‹æ˜¯å¦éƒ¨ç½²æˆåŠŸ"></a>æŸ¥çœ‹æ˜¯å¦éƒ¨ç½²æˆåŠŸ</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get nodes</span><br><span class="line">kubectl get pods -n kube-system</span><br></pre></td></tr></table></figure><h2 id="ç–‘éš¾è§£å†³-FAQ"><a href="#ç–‘éš¾è§£å†³-FAQ" class="headerlink" title="ç–‘éš¾è§£å†³ FAQ"></a><strong>ç–‘éš¾è§£å†³ FAQ</strong></h2><h3 id="Dockeré‡å¯æœåŠ¡å‡ºç°å¼‚å¸¸"><a href="#Dockeré‡å¯æœåŠ¡å‡ºç°å¼‚å¸¸" class="headerlink" title="Dockeré‡å¯æœåŠ¡å‡ºç°å¼‚å¸¸"></a>Dockeré‡å¯æœåŠ¡å‡ºç°å¼‚å¸¸</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—å®šä½åŸå› </span></span><br><span class="line">service docker status æˆ– systemctl status docker</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># æ˜¯å› ä¸º/var/run/docker.sockå‡ºé”™äº†</span></span><br><span class="line">level=fatal msg=<span class="hljs-string">"can't create unix socket /var/run/docker.sock: is a directory"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># åˆ é™¤/var/run/docker.sockæ–‡ä»¶</span></span><br><span class="line">rm -rf /var/run/docker.sock</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># é‡å¯dockeræœåŠ¡</span></span><br><span class="line">service docker restart æˆ– systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="Kuberneteså¿˜è®°åŠ å…¥é›†ç¾¤å‘½ä»¤"><a href="#Kuberneteså¿˜è®°åŠ å…¥é›†ç¾¤å‘½ä»¤" class="headerlink" title="Kuberneteså¿˜è®°åŠ å…¥é›†ç¾¤å‘½ä»¤"></a>Kuberneteså¿˜è®°åŠ å…¥é›†ç¾¤å‘½ä»¤</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># æç¤ºçš„å‘½ä»¤</span></span><br><span class="line">kubeadm join <span class="hljs-variable">$&#123;ip&#125;</span> --token <span class="hljs-variable">$&#123;token&#125;</span> --discovery-token-ca-cert-hash <span class="hljs-variable">$&#123;discovery-token-ca-cert-hash&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># æ‰¾å›çš„å‘½ä»¤</span></span><br><span class="line">kubeadm token create --<span class="hljs-built_in">print</span>-join-command</span><br></pre></td></tr></table></figure><h3 id="x509-certificate-signed-by-unknown-authority"><a href="#x509-certificate-signed-by-unknown-authority" class="headerlink" title="x509: certificate signed by unknown authority"></a>x509: certificate signed by unknown authority</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># é‡è£…å.kube/configå˜åŒ–äº†ï¼Œé‡æ–°åº”ç”¨é…ç½®</span></span><br><span class="line">mkdir -p <span class="hljs-variable">$HOME</span>/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) <span class="hljs-variable">$HOME</span>/.kube/config</span><br><span class="line"><span class="hljs-built_in">export</span> KUBECONFIG=/etc/kubernetes/admin.conf</span><br></pre></td></tr></table></figure><h3 id="Dockerå®¹å™¨è¿æ¥æœ¬æœºMySQL-Redis"><a href="#Dockerå®¹å™¨è¿æ¥æœ¬æœºMySQL-Redis" class="headerlink" title="Dockerå®¹å™¨è¿æ¥æœ¬æœºMySQL/Redis"></a>Dockerå®¹å™¨è¿æ¥æœ¬æœºMySQL/Redis</h3><h4 id="Bridgeæ¨¡å¼"><a href="#Bridgeæ¨¡å¼" class="headerlink" title="Bridgeæ¨¡å¼"></a>Bridgeæ¨¡å¼</h4><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># æŸ¥çœ‹dockerå®¹å™¨ç½‘ç»œæ¨¡å¼</span></span><br><span class="line">docker inspect <span class="hljs-variable">$&#123;container_id&#125;</span> | grep -i <span class="hljs-string">"network"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># é»˜è®¤ä¸ºbridgeçš„æ¨¡å¼</span></span><br><span class="line"><span class="hljs-string">"NetworkMode"</span>: <span class="hljs-string">"bridge"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># æ­¤æ—¶localhostä»…ä»…æŒ‡çš„æ˜¯å®¹å™¨è‡ªèº«åœ°å€ï¼Œåº”ä½¿ç”¨ä¸»æœºçš„å†…ç½‘åœ°å€</span></span><br></pre></td></tr></table></figure><h4 id="Hostæ¨¡å¼"><a href="#Hostæ¨¡å¼" class="headerlink" title="Hostæ¨¡å¼"></a>Hostæ¨¡å¼</h4><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># ä»¥hostçš„æ¨¡å¼å¯åŠ¨dockerå®¹å™¨</span></span><br><span class="line">docker run -d --network=host <span class="hljs-variable">$&#123;registry&#125;</span>:<span class="hljs-variable">$&#123;tag&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># æ­¤æ—¶localhoståŒæ—¶ä»£è¡¨äº†å®¹å™¨å’Œä¸»æœºçš„åœ°å€</span></span><br></pre></td></tr></table></figure><h3 id="Xshellå¤–ç½‘è¿œç¨‹è®¿é—®MySQL-Redis"><a href="#Xshellå¤–ç½‘è¿œç¨‹è®¿é—®MySQL-Redis" class="headerlink" title="Xshellå¤–ç½‘è¿œç¨‹è®¿é—®MySQL/Redis"></a>Xshellå¤–ç½‘è¿œç¨‹è®¿é—®MySQL/Redis</h3><h4 id="ä¿®æ”¹-MySQL-Redis-é…ç½®"><a href="#ä¿®æ”¹-MySQL-Redis-é…ç½®" class="headerlink" title="ä¿®æ”¹ MySQL/Redis é…ç½®"></a>ä¿®æ”¹ MySQL/Redis é…ç½®</h4><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># ç¼–è¾‘mysqlé…ç½®</span></span><br><span class="line">vim /etc/mysql/my.cnf</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ç›‘å¬æ‰€æœ‰ç½‘æ®µ</span></span><br><span class="line">[mysqld]</span><br><span class="line"><span class="hljs-built_in">bind</span>-address=0.0.0.0</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ä¿®æ”¹è¿œç¨‹ç™»å½•æƒé™</span></span><br><span class="line">mysql -u root -p</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">mysql&gt; update user <span class="hljs-built_in">set</span> host=<span class="hljs-string">'%'</span> <span class="hljs-built_in">where</span> user=<span class="hljs-string">'root'</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># é‡å¯mysqlæœåŠ¡ä½¿å…¶é‡æ–°ç”Ÿæ•ˆ</span></span><br><span class="line">mysqld --defaults-file=/etc/mysql/my.cnf</span><br><span class="line">service mysql restart æˆ– systemctl restart mysql</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ç¼–è¾‘redisé…ç½®</span></span><br><span class="line">vim /etc/redis/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># ç›‘å¬æ‰€æœ‰ç½‘æ®µ</span></span><br><span class="line"><span class="hljs-built_in">bind</span> 0.0.0.0</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># é‡å¯redis-serveræœåŠ¡ä½¿å…¶é‡æ–°ç”Ÿæ•ˆ</span></span><br><span class="line">redis-server /etc/redis/redis.conf</span><br><span class="line">service redis-server restart æˆ– systemctl restart redis-server</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹è…¾è®¯äº‘æœåŠ¡å™¨å®‰å…¨ç»„è§„åˆ™"><a href="#ä¿®æ”¹è…¾è®¯äº‘æœåŠ¡å™¨å®‰å…¨ç»„è§„åˆ™" class="headerlink" title="ä¿®æ”¹è…¾è®¯äº‘æœåŠ¡å™¨å®‰å…¨ç»„è§„åˆ™"></a>ä¿®æ”¹è…¾è®¯äº‘æœåŠ¡å™¨å®‰å…¨ç»„è§„åˆ™</h4><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># å…è®¸æ‰€æœ‰ç½‘æ®µè®¿é—®3306å’Œ6379è¿™ä¸¤ä¸ªç«¯å£</span></span><br><span class="line">0.0.0.0/0 TCP:3306,6379 Allow <span class="hljs-comment"># ipv4æ”¾è¡Œ</span></span><br><span class="line">::/0 TCP:3306,6379 Allow <span class="hljs-comment"># ipv6æ”¾è¡Œ</span></span><br></pre></td></tr></table></figure><h2 id="å…·ä½“æ¡ˆä¾‹-Cases"><a href="#å…·ä½“æ¡ˆä¾‹-Cases" class="headerlink" title="å…·ä½“æ¡ˆä¾‹ Cases"></a><strong>å…·ä½“æ¡ˆä¾‹ Cases</strong></h2><h3 id="äº¤å‰ç¼–è¯‘ä¸é•œåƒæ„å»º"><a href="#äº¤å‰ç¼–è¯‘ä¸é•œåƒæ„å»º" class="headerlink" title="äº¤å‰ç¼–è¯‘ä¸é•œåƒæ„å»º"></a>äº¤å‰ç¼–è¯‘ä¸é•œåƒæ„å»º</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># set go env</span></span><br><span class="line"><span class="hljs-built_in">export</span> GO111MODULE=auto</span><br><span class="line"><span class="hljs-built_in">export</span> GOPROXY=https://goproxy.io,direct</span><br><span class="line">go mod tidy</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># build binary executable</span></span><br><span class="line">mkdir -p ./bin</span><br><span class="line">GOOS=linux GOARCH=amd64 go build -o ./bin/giotto_gateway_core</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># Dockerfile</span></span><br><span class="line">FROM golang</span><br><span class="line">MAINTAINER LotteWong &lt;lottewong21@gmail.com&gt;</span><br><span class="line"></span><br><span class="line">WORKDIR /go/src/app</span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line">CMD ./bin/giotto_gateway_core -config ./configs/prod/</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># docker build</span></span><br><span class="line">commit=`git rev-parse --short HEAD`</span><br><span class="line">docker build -f ./ci/docker/Dockerfile -t giotto-gateway-core:<span class="hljs-variable">$commit</span> .</span><br></pre></td></tr></table></figure><h3 id="å®¹å™¨éƒ¨ç½²ä¸å®¹å™¨ç¼–æ’"><a href="#å®¹å™¨éƒ¨ç½²ä¸å®¹å™¨ç¼–æ’" class="headerlink" title="å®¹å™¨éƒ¨ç½²ä¸å®¹å™¨ç¼–æ’"></a>å®¹å™¨éƒ¨ç½²ä¸å®¹å™¨ç¼–æ’</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># deploy config</span></span><br><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: giotto-gateway-core</span><br><span class="line">spec:</span><br><span class="line">  replicas: 3</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      name: giotto-gateway-core</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        name: giotto-gateway-core</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">        - name: giotto-gateway-core</span><br><span class="line">          image: giotto-gateway-core:d1785da</span><br><span class="line">          imagePullPolicy: Never</span><br><span class="line">          ports:</span><br><span class="line">            - containerPort: 80</span><br><span class="line">            - containerPort: 443</span><br><span class="line">---</span><br><span class="line"><span class="hljs-comment"># service config</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: giotto-gateway-core</span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">    - port: 80</span><br><span class="line">      name: <span class="hljs-string">"http-proxy"</span></span><br><span class="line">      targetPort: 80</span><br><span class="line">      protocol: TCP</span><br><span class="line">      nodePort: 30080</span><br><span class="line">    - port: 443</span><br><span class="line">      name: <span class="hljs-string">"https-proxy"</span></span><br><span class="line">      targetPort: 443</span><br><span class="line">      protocol: TCP</span><br><span class="line">      nodePort: 30443</span><br><span class="line">  <span class="hljs-built_in">type</span>: NodePort</span><br><span class="line">  selector:</span><br><span class="line">    name: giotto-gateway-core</span><br><span class="line">    </span><br><span class="line"><span class="hljs-comment"># kubectl create</span></span><br><span class="line">kubectl create -f ./ci/k8s/core.yaml</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™-References"><a href="#å‚è€ƒèµ„æ–™-References" class="headerlink" title="å‚è€ƒèµ„æ–™ References"></a><strong>å‚è€ƒèµ„æ–™ References</strong></h2><ol><li><a href="https://cloud.tencent.com/developer/article/1817826" target="_blank" rel="noopener">åœ¨ Ubuntu ä¸Šå®‰è£… K8S æ•™ç¨‹</a></li><li><a href="https://my.oschina.net/u/4409146/blog/3306898" target="_blank" rel="noopener">ubuntu k8s å•èŠ‚ç‚¹å¿«é€Ÿå®‰è£…</a></li><li><a href="https://blog.csdn.net/u012891504/article/details/52857682" target="_blank" rel="noopener">dockeræœåŠ¡å¯åŠ¨å¤±è´¥</a></li><li><a href="https://blog.csdn.net/weixin_44130081/article/details/103563392" target="_blank" rel="noopener">K8Såœ¨kubeadm initä»¥åæŸ¥è¯¢kubeadm join</a></li><li><a href="https://stackoverflow.com/questions/36939381/x509-certificate-signed-by-unknown-authority-kubernetes" target="_blank" rel="noopener">x509 certificate signed by unknown authority- Kubernetes</a></li><li><a href="https://blog.csdn.net/suchahaerkang/article/details/84570488" target="_blank" rel="noopener">Dockerçš„å››ç§ç½‘ç»œæ¨¡å¼Bridgeæ¨¡å¼</a></li><li><a href="https://cloud.tencent.com/developer/article/1153843" target="_blank" rel="noopener">mysql è¿œç¨‹è¿æ¥æ•°æ®åº“çš„äºŒç§æ–¹æ³•</a></li><li><a href="https://blog.csdn.net/Light_Breeze/article/details/82070222" target="_blank" rel="noopener">è§£å†³mysqlä¸ç”¨å¯†ç ä¹Ÿèƒ½ç™»å½•</a></li></ol><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨&lt;strong&gt;QCloud&lt;/strong&gt;ä¸Šåˆ©ç”¨&lt;strong&gt;Kubernetes&lt;/strong&gt;ç¼–æ’åº”ç”¨ä¸æœåŠ¡ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹&lt;strong&gt;å››ä¸ªéƒ¨åˆ†&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¯å¢ƒå‡†å¤‡ Environment&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç–‘éš¾è§£å†³ FAQ&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å…·ä½“æ¡ˆä¾‹ Cases&lt;/li&gt;
&lt;li&gt;å‚è€ƒæ–‡çŒ® References&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="DevOps" scheme="http://yoursite.com/categories/DevOps/"/>
    
    
    <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
    <category term="Kubernetes" scheme="http://yoursite.com/tags/Kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# å¾®æœåŠ¡APIç½‘å…³çš„è®¾è®¡ä¸å®ç°(6) ç³»ç»Ÿæµ‹è¯•</title>
    <link href="http://yoursite.com/2021/06/05/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(6)/"/>
    <id>http://yoursite.com/2021/06/05/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(6)/</id>
    <published>2021-06-04T23:00:21.000Z</published>
    <updated>2021-06-21T03:11:42.222Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»<u>å¾®æœåŠ¡APIç½‘å…³</u>çš„<strong>ç³»ç»Ÿæµ‹è¯•</strong>ï¼Œåˆ†ä¸º<strong>ä¸¤ä¸ª</strong>æ–¹é¢ï¼š</p><ul><li>åŠŸèƒ½æµ‹è¯•</li><li>æ€§èƒ½æµ‹è¯•</li></ul><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><h2 id="åŠŸèƒ½æµ‹è¯•"><a href="#åŠŸèƒ½æµ‹è¯•" class="headerlink" title="åŠŸèƒ½æµ‹è¯•"></a><strong>åŠŸèƒ½æµ‹è¯•</strong></h2><h3 id="ç”¨ä¾‹è®¾è®¡"><a href="#ç”¨ä¾‹è®¾è®¡" class="headerlink" title="ç”¨ä¾‹è®¾è®¡"></a>ç”¨ä¾‹è®¾è®¡</h3><ul><li><a href="https://segmentfault.com/a/1190000012127784" target="_blank" rel="noopener">å¸¸è§æµ‹è¯•ç”¨ä¾‹è®¾è®¡æ–¹æ³•</a></li></ul><h3 id="ç”¨ä¾‹è®°å½•"><a href="#ç”¨ä¾‹è®°å½•" class="headerlink" title="ç”¨ä¾‹è®°å½•"></a>ç”¨ä¾‹è®°å½•</h3><table><thead><tr><th align="center">æ¡ç›®</th><th align="center">å†…å®¹</th></tr></thead><tbody><tr><td align="center">ç”¨ä¾‹ç¼–å·</td><td align="center"><code>[æ•°å­¦]</code></td></tr><tr><td align="center">åŠŸèƒ½æè¿°</td><td align="center"><code>[-]</code></td></tr><tr><td align="center">å‰ç½®æ¡ä»¶</td><td align="center"><code>[-]</code></td></tr><tr><td align="center">æµ‹è¯•è¿‡ç¨‹</td><td align="center"><code>[-]</code></td></tr><tr><td align="center">é¢„æœŸç»“æœ</td><td align="center"><code>[-]</code></td></tr><tr><td align="center">æ˜¯å¦é€šè¿‡</td><td align="center"><code>[æ˜¯å¦]</code></td></tr></tbody></table><h2 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a><strong>æ€§èƒ½æµ‹è¯•</strong></h2><h3 id="æµ‹è¯•ç¯å¢ƒåŠå·¥å…·"><a href="#æµ‹è¯•ç¯å¢ƒåŠå·¥å…·" class="headerlink" title="æµ‹è¯•ç¯å¢ƒåŠå·¥å…·"></a>æµ‹è¯•ç¯å¢ƒåŠå·¥å…·</h3><table><thead><tr><th align="center">æ¡ç›®</th><th align="center">å†…å®¹</th></tr></thead><tbody><tr><td align="center">ç¡¬ä»¶æœºå™¨é…ç½®</td><td align="center">è…¾è®¯äº‘æœåŠ¡å™¨1C2G1M</td></tr><tr><td align="center">æµ‹è¯•ç½‘ç»œç¯å¢ƒ</td><td align="center">localhost</td></tr><tr><td align="center">è½¯ä»¶å‹æµ‹å·¥å…·</td><td align="center">wrk</td></tr></tbody></table><p><img src="/images/wrk.png" alt="å‹æµ‹å·¥å…·wrkä½¿ç”¨æ–¹æ³•"></p><h3 id="æµ‹è¯•è¿‡ç¨‹åŠç»“æœ"><a href="#æµ‹è¯•è¿‡ç¨‹åŠç»“æœ" class="headerlink" title="æµ‹è¯•è¿‡ç¨‹åŠç»“æœ"></a>æµ‹è¯•è¿‡ç¨‹åŠç»“æœ</h3><table><thead><tr><th align="center">å‹æµ‹å¯¹è±¡</th><th align="center">å‹æµ‹å‘½ä»¤</th><th align="center">æ¯ç§’çš„è¯·æ±‚é‡</th></tr></thead><tbody><tr><td align="center">å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—</td><td align="center"><code>wrk -t30 -c600 -d30s -H&quot;Authorization:Bearer ${jwt}&quot; http://localhost:8080/wrk</code></td><td align="center">5651.29</td></tr><tr><td align="center">çº¯ <code>Golang</code> æœåŠ¡å™¨</td><td align="center"><code>wrk -t30 -c600 -d30s http://localhost:8081/wrk</code></td><td align="center">25961.68</td></tr><tr><td align="center"><code>Nginx</code></td><td align="center"><code>wrk -t30 -c600 -d30s http://localhost:8082/wrk</code></td><td align="center">3561.78</td></tr></tbody></table><ul><li>å¼€å¯<strong>30ä¸ªçº¿ç¨‹</strong>ï¼Œå¹¶å‘è¯·æ±‚<strong>600æ¬¡åå°æ¥å£</strong>ï¼ŒæŒç»­<strong>30ç§’æ—¶é—´</strong>ï¼Œé‡‡é›†å¹¶æ‰“å°å‹æµ‹ç»“æœã€‚</li><li>ä»<strong>æ¯ç§’çš„è¯·æ±‚é‡</strong>çœ‹ï¼Œ<strong>çº¯ <code>Golang</code> æœåŠ¡å™¨</strong>æ²¡æœ‰ä¸­é—´æµç¨‹æŸè€—å’Œé¢å¤–ç»„ä»¶å¼€é”€å› è€Œæ”¯æ’‘çš„ <code>QPS</code> å¤§å¹…é¢†å…ˆï¼Œ<strong>å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—</strong>èƒ½å¤Ÿè¶…è¿‡æœªè°ƒä¼˜å‰çš„ <strong><code>Nginx</code></strong> çš„æ€§èƒ½è¡¨ç°ã€‚</li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»&lt;u&gt;å¾®æœåŠ¡APIç½‘å…³&lt;/u&gt;çš„&lt;strong&gt;ç³»ç»Ÿæµ‹è¯•&lt;/strong&gt;ï¼Œåˆ†ä¸º&lt;strong&gt;ä¸¤ä¸ª&lt;/strong&gt;æ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŠŸèƒ½æµ‹è¯•&lt;/li&gt;
&lt;li&gt;æ€§èƒ½æµ‹è¯•&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# å¾®æœåŠ¡APIç½‘å…³çš„è®¾è®¡ä¸å®ç°(5) å®¹å™¨éƒ¨ç½²</title>
    <link href="http://yoursite.com/2021/06/04/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(5)/"/>
    <id>http://yoursite.com/2021/06/04/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(5)/</id>
    <published>2021-06-03T23:00:21.000Z</published>
    <updated>2021-06-20T14:10:45.635Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»<u>å¾®æœåŠ¡APIç½‘å…³</u>çš„<strong>å®¹å™¨éƒ¨ç½²</strong>ï¼Œåˆ†ä¸º<strong>ä¸‰ä¸ª</strong>æ–¹é¢ï¼š</p><ul><li><code>Golang</code> äº¤å‰ç¼–è¯‘</li><li><code>Docker</code> é•œåƒæ„å»º</li><li><code>Kubernetes</code> å®¹å™¨ç¼–æ’</li></ul><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><h2 id="Golangäº¤å‰ç¼–è¯‘"><a href="#Golangäº¤å‰ç¼–è¯‘" class="headerlink" title="Golangäº¤å‰ç¼–è¯‘"></a><strong>Golangäº¤å‰ç¼–è¯‘</strong></h2><ul><li><u><code>Golang</code> æ”¯æŒäº¤å‰ç¼–è¯‘ï¼Œå³åœ¨å½“å‰çš„æ“ä½œç³»ç»Ÿå’Œä½“ç³»æ¶æ„ä¸Šç”ŸæˆæŒ‡å®šçš„æ“ä½œç³»ç»Ÿå’Œä½“ç³»æ¶æ„çš„å¯æ‰§è¡Œç¨‹åºã€‚</u>å¾®æœåŠ¡APIç½‘å…³é¢„å…ˆé‡‡å– <code>Golang</code> äº¤å‰ç¼–è¯‘å‡ºäºä¸¤ç‚¹è€ƒè™‘ï¼šä¸€æ˜¯æå‰åœ¨å¼€å‘ç¯å¢ƒä¸­ç¼–è¯‘ç¨‹åºæ¯”ä¹‹ååœ¨é•œåƒæ„å»ºä¸­ç¼–è¯‘ç¨‹åºçš„<strong>é€Ÿåº¦è¦æ›´åŠ å¿«</strong>ï¼›äºŒæ˜¯å¼€å‘ç¯å¢ƒå’Œéƒ¨ç½²ç¯å¢ƒçš„æ“ä½œç³»ç»Ÿä¸åŒï¼Œå¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶å¿…é¡»ç»è¿‡äº¤å‰ç¼–è¯‘<strong>æ‰èƒ½æ­£å¸¸è¿è¡Œ</strong>ã€‚</li></ul><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># take giotto-gateway-core as an example</span></span><br><span class="line"><span class="hljs-comment"># https://github.com/LotteWong/giotto-gateway-core/blob/main/ci/docker/cross_compile.sh</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># set go env</span></span><br><span class="line"><span class="hljs-built_in">export</span> GO111MODULE=auto</span><br><span class="line"><span class="hljs-built_in">export</span> GOPROXY=https://goproxy.io,direct</span><br><span class="line">go mod tidy</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># build binary executable</span></span><br><span class="line">mkdir -p ./bin</span><br><span class="line">GOOS=linux GOARCH=amd64 go build -o ./bin/giotto_gateway_core</span><br></pre></td></tr></table></figure><ul><li>å…ˆè®¾ç½® <code>Golang</code> æ‰“å¼€ <code>Go Module</code> æ¨¡å¼å¹¶ä¸‹è½½ç¨‹åºçš„æ¨¡å—ä¾èµ–ï¼Œå†å®šä¹‰ç›®æ ‡çš„æ“ä½œç³»ç»Ÿå’Œä½“ç³»æ¶æ„å¼€å§‹äº¤å‰ç¼–è¯‘ã€‚</li></ul><h2 id="Dockeré•œåƒæ„å»º"><a href="#Dockeré•œåƒæ„å»º" class="headerlink" title="Dockeré•œåƒæ„å»º"></a><strong>Dockeré•œåƒæ„å»º</strong></h2><ul><li><u><code>Docker</code> æ˜¯ä¸€ä¸ªé€šè¿‡ç®¡ç† <code>Linux</code> å®¹å™¨æ¥å®ç°åº”ç”¨ç¯å¢ƒéš”ç¦»çš„å¼€æºå®¹å™¨å¼•æ“ï¼Œå®ƒæä¾›äº†ä¸€æ•´å¥—å®Œå¤‡ä¸”æ˜“ç”¨çš„å®¹å™¨ç®¡ç†æ¥å£ã€‚</u>å¾®æœåŠ¡APIç½‘å…³çš„ç®¡ç†æ¨¡å—å’Œæ ¸å¿ƒæ¨¡å—ä¸¤ä¸ªå¾®æœåŠ¡å°†ä½¿ç”¨ <code>Docker</code> æ„å»ºé•œåƒï¼Œå®ç°<strong>æ›´å¿«çš„ç¨‹åºéƒ¨ç½²å’Œæ›´ä½çš„è®¡ç®—å¼€é”€</strong>ã€‚</li></ul><figure class="highlight dockerfile hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># take giotto-gateway-core as an example</span></span><br><span class="line"><span class="hljs-comment"># https://github.com/LotteWong/giotto-gateway-core/blob/main/ci/docker/Dockerfile</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">FROM</span> golang</span><br><span class="line"><span class="hljs-keyword">MAINTAINER</span> LotteWong &lt;lottewong21@gmail.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">WORKDIR</span><span class="hljs-bash"> /go/src/app</span></span><br><span class="line"><span class="hljs-keyword">COPY</span><span class="hljs-bash"> . .</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">CMD</span><span class="hljs-bash"> ./bin/giotto_gateway_core -config ./configs/prod/</span></span><br></pre></td></tr></table></figure><ul><li>å…ˆæ‹‰å–åŸºç¡€é•œåƒ <code>golang</code>ï¼Œå†å®šä¹‰å®¹å™¨å†…çš„å·¥ä½œç›®å½•ä¸º <code>/go/src/app</code>ï¼Œæ¥ç€å°†ä¸»æœºçš„æºæ–‡ä»¶æ‹·è´è¿›å®¹å™¨ä¸­ï¼Œæœ€åå‘½ä»¤è¡Œå¯åŠ¨å¾®æœåŠ¡ã€‚</li></ul><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># take giotto-gateway-core as an example</span></span><br><span class="line"><span class="hljs-comment"># https://github.com/LotteWong/giotto-gateway-core/blob/main/ci/docker/cross_compile.sh</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># build docker images</span></span><br><span class="line">commit=`git rev-parse --short HEAD`</span><br><span class="line">docker build -f ./ci/docker/Dockerfile -t giotto-gateway-core:<span class="hljs-variable">$commit</span> .</span><br></pre></td></tr></table></figure><ul><li>å…ˆè¯»å– <code>Git</code> ç‰ˆæœ¬ç®¡ç†åº“ä¸­æœ€æ–°çš„ <code>commit id</code> ä½œä¸ºé•œåƒçš„ <code>tag</code>ï¼Œä»¥ä¾¿æ›´å¥½åœ°æ ‡è¯†å’Œç®¡ç†é•œåƒï¼Œå†ä½¿ç”¨ <code>docker build</code> å‘½ä»¤ï¼Œä¼ å…¥å‚æ•°æ„å»ºé•œåƒã€‚</li></ul><h2 id="Kuberneteså®¹å™¨ç¼–æ’"><a href="#Kuberneteså®¹å™¨ç¼–æ’" class="headerlink" title="Kuberneteså®¹å™¨ç¼–æ’"></a><strong>Kuberneteså®¹å™¨ç¼–æ’</strong></h2><ul><li><u><code>Kubernetes</code> æ˜¯å…·å¤‡è‰¯å¥½çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•ã€è°ƒåº¦å’Œç¼–æ’èƒ½åŠ›çš„å¼€æºå®¹å™¨ç®¡ç†å¹³å°ï¼Œèƒ½å¤Ÿå¸®åŠ©æœ‰æ•ˆåœ°é™ä½å®¹å™¨è¿ç»´æˆæœ¬ï¼Œæé«˜æœåŠ¡é›†ç¾¤ç®¡ç†æ•ˆç‡ã€‚</u>å¾®æœåŠ¡APIç½‘å…³çš„ç®¡ç†æ¨¡å—å’Œæ ¸å¿ƒæ¨¡å—ä¸¤ä¸ªå¾®æœåŠ¡å°†ä½¿ç”¨ <code>Kubernetes</code> éƒ¨ç½²å’Œç¼–æ’å®¹å™¨ï¼Œä»¥æé«˜ç³»ç»Ÿçš„<strong>æ‰©å±•æ€§å’Œå¯é æ€§</strong>ã€‚</li></ul><p><img src="/images/microservice_api_gateway_k8s.png" alt="å¾®æœåŠ¡APIç½‘å…³åŸºäºKubernetesçš„éƒ¨ç½²å›¾"></p><ul><li>å¯¹äº<u>æ ¸å¿ƒæ¨¡å—</u>è€Œè¨€ï¼Œ1ä¸ªæ ¸å¿ƒæ¨¡å— <code>Pod</code> ç®¡ç†1ä¸ªæ ¸å¿ƒæ¨¡å— <code>Container</code> çš„<strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œæ€»å…±éƒ¨ç½²3ä¸ª <code>Pod</code> å®ç°æ ¸å¿ƒæ¨¡å—åŠŸèƒ½çš„<strong>é«˜å¯ç”¨</strong>ï¼›å¯¹äº<u>ç®¡ç†æ¨¡å—</u>è€Œè¨€ï¼Œ1ä¸ªç®¡ç†æ¨¡å— <code>Pod</code> ç®¡ç†1ä¸ªç®¡ç†æ¨¡å— <code>Container</code> çš„<strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œç”±äºåˆ°è¾¾ç®¡ç†æ¨¡å—çš„æµé‡ç›¸å¯¹è¾ƒå°ï¼Œæ€»å…±éƒ¨ç½²1ä¸ª <code>Pod</code> <strong>æä¾›æœåŠ¡</strong>ã€‚åˆ›å»º <code>Deployment</code> ç”¨äºå¯¹ <code>Pod</code> è¿›è¡Œ<strong>å¼¹æ€§ä¼¸ç¼©å’Œè´Ÿè½½å‡è¡¡</strong>ï¼Œåˆ›å»º <code>Service</code> ç”¨äºå¯¹ <code>Pod</code> è¿›è¡Œç«¯å£æ˜ å°„ä»¥<strong>å®ç°å¤–éƒ¨ç½‘ç»œçš„è®¿é—®</strong>ã€‚</li></ul><figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># take giotto-gateway-core as an example</span></span><br><span class="line"><span class="hljs-comment"># https://github.com/LotteWong/giotto-gateway-core/blob/main/ci/k8s/core.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># deploy config</span></span><br><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line">  <span class="hljs-attr">name:</span> <span class="hljs-string">giotto-gateway-core</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line">  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span></span><br><span class="line">  <span class="hljs-attr">selector:</span></span><br><span class="line">    <span class="hljs-attr">matchLabels:</span></span><br><span class="line">      <span class="hljs-attr">name:</span> <span class="hljs-string">giotto-gateway-core</span></span><br><span class="line">  <span class="hljs-attr">template:</span></span><br><span class="line">    <span class="hljs-attr">metadata:</span></span><br><span class="line">      <span class="hljs-attr">labels:</span></span><br><span class="line">        <span class="hljs-attr">name:</span> <span class="hljs-string">giotto-gateway-core</span></span><br><span class="line">    <span class="hljs-attr">spec:</span></span><br><span class="line">      <span class="hljs-attr">containers:</span></span><br><span class="line">        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">giotto-gateway-core</span></span><br><span class="line">          <span class="hljs-attr">image:</span> <span class="hljs-string">giotto-gateway-core:d1785da</span></span><br><span class="line">          <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">Never</span></span><br><span class="line">          <span class="hljs-attr">ports:</span></span><br><span class="line">            <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span></span><br><span class="line">            <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">443</span></span><br></pre></td></tr></table></figure><ul><li><code>Kubernetes Deployment</code> é…ç½®å®šä¹‰äº† <code>Pod</code> çš„å‰¯æœ¬æ•°é‡ã€å…ƒæ•°æ®ã€å®¹å™¨é•œåƒå’Œå®¹å™¨ç«¯å£æ˜ å°„å…³ç³»ç­‰ï¼Œç”¨äºå¯¹å¾®æœåŠ¡å®¹å™¨è¿›è¡Œéƒ¨ç½²è¿è¡Œã€å¼¹æ€§ä¼¸ç¼©å’Œè´Ÿè½½å‡è¡¡ã€‚</li></ul><figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># take giotto-gateway-core as an example</span></span><br><span class="line"><span class="hljs-comment"># https://github.com/LotteWong/giotto-gateway-core/blob/main/ci/k8s/core.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># service config</span></span><br><span class="line"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span></span><br><span class="line"><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span></span><br><span class="line"><span class="hljs-attr">metadata:</span></span><br><span class="line">  <span class="hljs-attr">name:</span> <span class="hljs-string">giotto-gateway-core</span></span><br><span class="line"><span class="hljs-attr">spec:</span></span><br><span class="line">  <span class="hljs-attr">ports:</span></span><br><span class="line">    <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">80</span></span><br><span class="line">      <span class="hljs-attr">name:</span> <span class="hljs-string">"http-proxy"</span></span><br><span class="line">      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">80</span></span><br><span class="line">      <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span></span><br><span class="line">      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30080</span></span><br><span class="line">    <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">443</span></span><br><span class="line">      <span class="hljs-attr">name:</span> <span class="hljs-string">"https-proxy"</span></span><br><span class="line">      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">443</span></span><br><span class="line">      <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span></span><br><span class="line">      <span class="hljs-attr">nodePort:</span> <span class="hljs-number">30443</span></span><br><span class="line">  <span class="hljs-attr">type:</span> <span class="hljs-string">NodePort</span></span><br><span class="line">  <span class="hljs-attr">selector:</span></span><br><span class="line">    <span class="hljs-attr">name:</span> <span class="hljs-string">giotto-gateway-core</span></span><br></pre></td></tr></table></figure><ul><li><code>Kubernetes Service</code> é…ç½®å®šä¹‰äº†å…ƒæ•°æ®å’Œå¯¹å¤–ç«¯å£æ˜ å°„å…³ç³»ç­‰ï¼Œç”¨äºå»ºç«‹å¤–éƒ¨ç½‘ç»œè®¿é—® <code>Kubernetes</code> èŠ‚ç‚¹å†…å®¹å™¨çš„é€šä¿¡æ¡¥æ¢ã€‚</li></ul><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># take giotto-gateway-core as an example</span></span><br><span class="line"><span class="hljs-comment"># https://github.com/LotteWong/giotto-gateway-core/blob/main/ci/k8s/apply_yaml.sh</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># k8s apply yaml to create deploy and service</span></span><br><span class="line">kubectl create -f ./ci/k8s/core.yaml</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ <code>kubectl create</code> å‘½ä»¤ï¼Œä¼ å…¥é…ç½®æ–‡ä»¶è·¯å¾„åˆ›å»º <code>Deployment</code> å’Œ <code>Service</code>ã€‚</li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»&lt;u&gt;å¾®æœåŠ¡APIç½‘å…³&lt;/u&gt;çš„&lt;strong&gt;å®¹å™¨éƒ¨ç½²&lt;/strong&gt;ï¼Œåˆ†ä¸º&lt;strong&gt;ä¸‰ä¸ª&lt;/strong&gt;æ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Golang&lt;/code&gt; äº¤å‰ç¼–è¯‘&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Docker&lt;/code&gt; é•œåƒæ„å»º&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Kubernetes&lt;/code&gt; å®¹å™¨ç¼–æ’&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Golang" scheme="http://yoursite.com/tags/Golang/"/>
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
    <category term="Kubernetes" scheme="http://yoursite.com/tags/Kubernetes/"/>
    
    <category term="Docker" scheme="http://yoursite.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# å¾®æœåŠ¡APIç½‘å…³çš„è®¾è®¡ä¸å®ç°(3) å¾®æœåŠ¡è®¾è®¡</title>
    <link href="http://yoursite.com/2021/06/03/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(3)/"/>
    <id>http://yoursite.com/2021/06/03/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(3)/</id>
    <published>2021-06-02T23:00:21.000Z</published>
    <updated>2021-06-18T08:18:18.511Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»<u>å¾®æœåŠ¡APIç½‘å…³</u>çš„<strong>å¾®æœåŠ¡è®¾è®¡</strong>ï¼Œåˆ†ä¸º<strong>ä¸¤ä¸ª</strong>æ–¹é¢ï¼š</p><ul><li>å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—è®¾è®¡ - <strong>æ—¶åºå›¾</strong></li><li>å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—è®¾è®¡ - <strong>æ—¶åºå›¾</strong></li></ul><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><h2 id="UML"><a href="#UML" class="headerlink" title="UML"></a><strong>UML</strong></h2><ul><li><u>æ—¶åºå›¾</u>ä¸€èˆ¬ç”±<strong>è§’è‰²ã€å¯¹è±¡ã€ç”Ÿå‘½çº¿ã€æ§åˆ¶ç„¦ç‚¹ã€æ¶ˆæ¯å’Œç»„åˆç‰‡æ®µ</strong>æ„æˆã€‚</li></ul><h3 id="æ§åˆ¶ç„¦ç‚¹"><a href="#æ§åˆ¶ç„¦ç‚¹" class="headerlink" title="æ§åˆ¶ç„¦ç‚¹"></a>æ§åˆ¶ç„¦ç‚¹</h3><ul><li>æ§åˆ¶ç„¦ç‚¹æ˜¯æ—¶åºå›¾ä¸­è¡¨ç¤ºæ—¶é—´æ®µçš„ç¬¦å·ï¼Œåœ¨æ­¤æ—¶é—´æ®µå†…å¯¹è±¡å°†æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</li></ul><h3 id="æ¶ˆæ¯"><a href="#æ¶ˆæ¯" class="headerlink" title="æ¶ˆæ¯"></a>æ¶ˆæ¯</h3><table><thead><tr><th align="center">æ¶ˆæ¯ç±»å‹</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">åŒæ­¥æ¶ˆæ¯</td><td align="center">å‘é€è€…åŒæ­¥è°ƒç”¨æ¥æ”¶è€…ï¼Œä¸¤è€…é¡ºåºå·¥ä½œ</td></tr><tr><td align="center">å¼‚æ­¥æ¶ˆæ¯</td><td align="center">å‘é€è€…å¼‚æ­¥è°ƒç”¨æ¥æ”¶è€…ï¼Œä¸¤è€…å¹¶å‘å·¥ä½œ</td></tr><tr><td align="center">è¿”å›æ¶ˆæ¯</td><td align="center">ä»è°ƒç”¨ä¸­è¿”å›ç»“æœ</td></tr><tr><td align="center">è‡ªè”æ¶ˆæ¯</td><td align="center">è°ƒç”¨å¯¹è±¡è‡ªèº«æ–¹æ³•</td></tr></tbody></table><h3 id="ç»„åˆç‰‡æ®µ"><a href="#ç»„åˆç‰‡æ®µ" class="headerlink" title="ç»„åˆç‰‡æ®µ"></a>ç»„åˆç‰‡æ®µ</h3><table><thead><tr><th align="center">ç»„åˆç±»å‹</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">Alternative Fragment (alt)</td><td align="center">ç›¸å½“äº if-else</td></tr><tr><td align="center">Option Fragment (opt)</td><td align="center">ç›¸å½“äº switch-case</td></tr><tr><td align="center">Parallel Fragment (par)</td><td align="center">ç›¸å½“äº go</td></tr><tr><td align="center">Loop Fragment (loop)</td><td align="center">ç›¸å½“äº for</td></tr></tbody></table><h2 id="å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—è®¾è®¡"><a href="#å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—è®¾è®¡" class="headerlink" title="å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—è®¾è®¡"></a><strong>å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—è®¾è®¡</strong></h2><h3 id="æ¶æ„å›¾"><a href="#æ¶æ„å›¾" class="headerlink" title="æ¶æ„å›¾"></a>æ¶æ„å›¾</h3><ul><li>ä¸‹å›¾æ˜¯<u>å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—çš„æ¶æ„å›¾</u>ï¼Œå¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—çš„å†…éƒ¨é€»è¾‘æ˜¯å…¸å‹çš„MVCæ¨¡å¼ï¼Œç”± <strong><code>UI</code> å±‚ã€<code>Router</code> å±‚ã€<code>Controller</code> å±‚å’Œ <code>Dao</code> å±‚</strong>ç»„æˆã€‚</li></ul><p><img src="/images/microservice_api_gateway_admin_arch.png" alt="å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—æ¶æ„å›¾"></p><ol><li><strong><code>UI</code> å±‚</strong>å³å‰ç«¯å¯è§†åŒ–çš„ç®¡ç†å¹³å°ç•Œé¢ï¼Œå‰ç«¯ä»£ç è¢«ç¼–è¯‘æ‰“åŒ…åï¼Œå°†é™æ€æ‰˜ç®¡äºç®¡ç†æ¨¡å—ä¸­ã€‚</li><li><strong><code>Router</code> å±‚</strong>å¯¹å¤–æš´éœ²APIæ¥å£ï¼Œå®šä¹‰äº†APIçš„è¯·æ±‚æ–¹æ³•å’Œè®¿é—®è·¯å¾„ï¼Œç¼–æ’äº†æ‰€åº”ç”¨çš„ä¸­é—´ä»¶çš„ç±»å‹å’Œé¡ºåºã€‚</li><li><strong><code>Controller</code> å±‚</strong>æ˜¯å…·ä½“å®ç°ä¸šåŠ¡é€»è¾‘çš„å±‚æ¬¡ï¼Œåœ¨è¯¥å±‚æ¬¡è¿›è¡Œç”¨æˆ·ç™»å½•ã€ç”¨æˆ·ç™»å‡ºã€ç®¡ç†ç”¨æˆ·ã€ç®¡ç†æœåŠ¡ã€ç®¡ç†åº”ç”¨å’Œæ•°æ®ç»Ÿè®¡åŠŸèƒ½çš„ç¼–å†™ã€‚</li><li><strong><code>Dao</code> å±‚</strong>ä½œä¸ºæ•°æ®åº“é©±åŠ¨å±‚ç›´æ¥å¯¹æ¥ä¸åŒç±»å‹çš„æ•°æ®åº“ï¼Œç®¡ç†æ¨¡å—æ”¯æŒå¯¹ <code>MySQL</code> å’Œ <code>Redis</code> è¿›è¡Œæ“ä½œã€‚</li><li><code>UI</code> å±‚å’Œ <code>Router</code> å±‚ä¹‹é—´ä¸»è¦ä¼ è¾“ <strong><code>json</code></strong> æ•°æ®ï¼Œç»Ÿä¸€äº†å‰åç«¯çš„æ•°æ®ä¼ è¾“æ ¼å¼ï¼›<code>Router</code> å±‚å’Œ <code>Controller</code> å±‚ä¹‹é—´ä¸»è¦ä¼ è¾“ç¨‹åºå®šä¹‰çš„ <strong><code>dto</code> (æ•°æ®ä¼ è¾“å¯¹è±¡)</strong> ç»“æ„ä½“ï¼›<code>Controller</code> å±‚å’Œ <code>Dao</code> å±‚ä¹‹é—´ä¸»è¦ä¼ è¾“ç¨‹åºå®šä¹‰çš„ <strong><code>po</code> (æŒä¹…åŒ–å¯¹è±¡)</strong> ç»“æ„ä½“ã€‚</li></ol><h3 id="æ—¶åºå›¾"><a href="#æ—¶åºå›¾" class="headerlink" title="æ—¶åºå›¾"></a>æ—¶åºå›¾</h3><ul><li>ä¸‹å›¾æ˜¯<u>å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—çš„æ—¶åºå›¾</u>ï¼Œæ¥æè¿°ç®¡ç†å‘˜ç”¨æˆ·å¦‚ä½•é€šè¿‡ç®¡ç†æ¨¡å—è¿›è¡Œç™»å½•ç™»å‡ºå’Œå„é¡¹é…ç½®ç®¡ç†ã€‚</li></ul><p><img src="/images/microservice_api_gateway_admin_seq.png" alt="å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—æ—¶åºå›¾"></p><ol><li><strong>ç¬¬1æ­¥åˆ°ç¬¬2æ­¥</strong>ï¼Œç®¡ç†å‘˜ç”¨æˆ·éœ€è¦è¾“å…¥ç”¨æˆ·åç§°å’Œç”¨æˆ·å¯†ç ç™»å½•ï¼Œæ­¤æ—¶ç™»å½•ç”Ÿæˆçš„ä¼šè¯ä¿¡æ¯å°†ä¿å­˜åˆ° <code>Redis</code> ï¼Œä»¥ä¾¿ä¿æŒä¸€å®šæ—¶é—´å†…çš„ç™»å½•çŠ¶æ€ã€‚</li><li><strong>ç¬¬3æ­¥åˆ°ç¬¬5æ­¥</strong>ï¼Œç®¡ç†å‘˜ç”¨æˆ·æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤é…ç½®ï¼Œé…ç½®çš„å˜æ›´å°†ä¼šåˆ†åˆ«å­˜å…¥åˆ° <code>MySQL</code> å’Œ <code>Redis</code> ä¸­ã€‚</li><li><strong>ç¬¬6æ­¥åˆ°ç¬¬12æ­¥</strong>ï¼Œç®¡ç†å‘˜ç”¨æˆ·æŸ¥è¯¢é…ç½®ï¼Œè‹¥ç¼“å­˜å‘½ä¸­åˆ™ç›´æ¥ä» <code>Redis</code> ä¸­è¯»å–é…ç½®çš„ç¼“å­˜æ•°æ®ï¼Œè‹¥ç¼“å­˜æœªå‘½ä¸­åˆ™ä¼šä» <code>MySQL</code> ä¸­è¯»å–é…ç½®çš„æ•°æ®åº“æ•°æ®ï¼Œå¹¶å°†é…ç½®å›å†™åˆ° <code>Redis</code> ç¼“å­˜ä¸­ï¼Œç„¶åè¿”å›é…ç½®ç»™ç®¡ç†å‘˜ç”¨æˆ·ã€‚</li><li><strong>ç¬¬13æ­¥åˆ°ç¬¬14æ­¥</strong>ï¼Œå½“ç®¡ç†å‘˜ç”¨æˆ·ç™»å‡ºæ—¶ï¼Œç®¡ç†æ¨¡å—å°†åˆ é™¤ <code>Redis</code> ä¸­å¯¹åº”çš„ä¼šè¯ä¿¡æ¯ï¼Œæ­¤åè¯¥ç®¡ç†å‘˜ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ä¸å†ä¿æŒï¼Œå¯ä»¥é€‰æ‹©é‡æ–°ç™»å½•æˆ–è€…åˆ‡æ¢è´¦æˆ·ç™»å½•ã€‚</li></ol><h2 id="å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—è®¾è®¡"><a href="#å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—è®¾è®¡" class="headerlink" title="å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—è®¾è®¡"></a><strong>å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—è®¾è®¡</strong></h2><h3 id="æ¶æ„å›¾-1"><a href="#æ¶æ„å›¾-1" class="headerlink" title="æ¶æ„å›¾"></a>æ¶æ„å›¾</h3><ul><li>ä¸‹å›¾æ˜¯<u>å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—çš„æ¶æ„å›¾</u>ï¼Œå¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—ç”±å¤šä¸ªä¸­é—´ä»¶ä»¥æ´‹è‘±æ¨¡å‹çš„å½¢å¼ç»„ç»‡èµ·æ¥ï¼Œå¹¶ä¸ <code>Redis</code> å’Œ <code>Consul</code> ç»“åˆä½¿ç”¨ï¼Œä¸ºä¸åŒå½¢æ€çš„å®¢æˆ·ç«¯æä¾›å¤šåè®®çš„åå°æœåŠ¡ç»Ÿä¸€å…¥å£ã€‚</li></ul><p><img src="/images/microservice_api_gateway_core_arch.png" alt="å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—æ¶æ„å›¾"></p><ol><li><code>App</code> åº”ç”¨æˆ– <code>Web</code> åº”ç”¨å‘èµ·è¯·æ±‚ï¼Œåœ¨æ ¸å¿ƒæ¨¡å—ä¸­ç»è¿‡åè®®æ¥å…¥ã€æƒé™è®¤è¯ã€æµé‡ç»Ÿè®¡ã€æµé‡æ§åˆ¶ã€è¯·æ±‚é‡å†™ã€è´Ÿè½½å‡è¡¡å’Œåå‘ä»£ç†ä¸­é—´ä»¶çš„å¤„ç†ï¼Œæœ€ç»ˆåˆ°è¾¾åå°çš„ <code>HTTP</code> æœåŠ¡ã€<code>HTTPS</code> æœåŠ¡æˆ– <code>WebSocket</code> æœåŠ¡ã€‚</li><li>å…¶ä¸­ï¼Œåå°çš„æœåŠ¡åº”é¢„å…ˆé…ç½®å¥½æœåŠ¡å’Œåº”ç”¨çš„é…ç½®ï¼Œæ–¹ä¾¿æ ¸å¿ƒæ¨¡å—çš„åè®®æ¥å…¥ä¸­é—´ä»¶å’Œæƒé™è®¤è¯ä¸­é—´ä»¶è¯»å–æœåŠ¡å’Œåº”ç”¨çš„é…ç½®è¿›è€Œå¤„ç†åç»­çš„ä¸šåŠ¡é€»è¾‘ã€‚åŒæ—¶ï¼Œåå°çš„æœåŠ¡ä¹Ÿåº”å…ˆåœ¨ <code>Consul</code> ä¸­æ³¨å†ŒæœåŠ¡åç§°å’Œåœ°å€ï¼Œæ–¹ä¾¿æ ¸å¿ƒæ¨¡å—çš„è´Ÿè½½å‡è¡¡ä¸­é—´ä»¶å‘ç°æœåŠ¡åœ°å€ï¼Œæ ¹æ®æƒé‡åˆ—è¡¨è®¾ç½®å’Œè´Ÿè½½å‡è¡¡ç®—æ³•åˆç†åˆ†å‘æµé‡ï¼Œæœ€åäº¤ç”±åå‘ä»£ç†ä¸­é—´ä»¶å»è®¿é—®å®é™…çš„åå°æœåŠ¡ã€‚</li><li>ç‰¹åˆ«åœ°ï¼Œåœ¨æ ¸å¿ƒæ¨¡å—ä¸­åº”è¯¥ä¿æŒå¯¹æœåŠ¡åœ°å€å˜åŒ–çš„ç›‘å¬ï¼Œ<code>Consul</code> ä¹Ÿæœ‰å¿…è¦å‘¨æœŸæ€§å¯¹åå°æœåŠ¡è¿›è¡Œå¥åº·æ£€æŸ¥ï¼Œä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚</li></ol><h3 id="æ—¶åºå›¾-1"><a href="#æ—¶åºå›¾-1" class="headerlink" title="æ—¶åºå›¾"></a>æ—¶åºå›¾</h3><ul><li>ä¸‹å›¾æ˜¯<u>å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—çš„æ—¶åºå›¾</u>ï¼Œæ¥è¯´æ˜åº”ç”¨å¦‚ä½•é€šè¿‡æ ¸å¿ƒæ¨¡å—è¿›è¡Œå…¬å…±é€»è¾‘å¤„ç†å’Œè¯·æ±‚ä»£ç†è½¬å‘ã€‚</li></ul><p><img src="/images/microservice_api_gateway_core_seq.png" alt="å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—æ—¶åºå›¾"></p><ol><li><strong>ç¬¬1æ­¥</strong>ï¼Œåº”ç”¨å‘èµ·è¯·æ±‚ã€‚</li><li><strong>ç¬¬2æ­¥åˆ°ç¬¬7æ­¥</strong>ï¼Œæ ¸å¿ƒæ¨¡å—å…ˆå‘ <code>Redis</code> ç¼“å­˜æŸ¥è¯¢æœåŠ¡é…ç½®è¿›è¡Œåè®®æ¥å…¥ï¼Œç„¶åæŸ¥è¯¢åº”ç”¨é…ç½®è¿›è¡Œæƒé™è®¤è¯ã€‚</li><li><strong>ç¬¬8æ­¥åˆ°ç¬¬11æ­¥</strong>ï¼Œè¿›è¡Œæµé‡ç»Ÿè®¡å’Œæµé‡æ§åˆ¶ï¼Œå¹¶å›å†™å…¥ <code>Redis</code>ã€‚</li><li><strong>ç¬¬12æ­¥</strong>ï¼Œæ ¹æ®è§„åˆ™è¿›è¡Œè¯·æ±‚é‡å†™ã€‚</li><li><strong>ç¬¬13æ­¥åˆ°ç¬¬15æ­¥</strong>ï¼Œæ ¹æ®æœåŠ¡å‘ç°è·å–çš„åœ°å€åˆ—è¡¨ä»¥åŠé¢„å…ˆé…ç½®çš„æƒé‡åˆ—è¡¨åº”ç”¨æŒ‡å®šçš„è´Ÿè½½å‡è¡¡ç®—æ³•é€‰å‡ºè®¿é—®åœ°å€ã€‚</li><li><strong>ç¬¬16æ­¥åˆ°ç¬¬18æ­¥</strong>ï¼Œæ ¸å¿ƒæ¨¡å—ä½¿ç”¨è´Ÿè½½å‡è¡¡åœ°å€åå‘ä»£ç†è®¿é—®åå°æœåŠ¡ï¼Œå¹¶å°†å“åº”è¿”å›ç»™åº”ç”¨ã€‚</li></ol><h2 id="FAQs"><a href="#FAQs" class="headerlink" title="FAQs"></a><strong>FAQs</strong></h2><blockquote><p><strong>Qï¼š</strong>å¹¶è¡Œå’Œå¼‚æ­¥å¦‚ä½•ç”¨æ—¶åºå›¾æ¥è¡¨ç¤ºï¼Ÿ</p><p><strong>Aï¼š</strong>é¦–å…ˆç¡®å®šè§¦å‘çš„æ—¶é—´ç‚¹ï¼Œæ¥ç€åˆ¤æ–­æ˜¯å¦å¹¶è¡Œï¼Œæœ€ååˆ¤æ–­æ˜¯å¦å¼‚æ­¥</p></blockquote><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a><strong>Refs</strong></h2><ul><li><a href="https://www.cnblogs.com/ywqu/archive/2009/12/22/1629426.html" target="_blank" rel="noopener">UMLå»ºæ¨¡ä¹‹æ—¶åºå›¾ï¼ˆSequence Diagramï¼‰</a></li><li><a href="https://blog.csdn.net/craftsman1970/article/details/72629590" target="_blank" rel="noopener">åºåˆ—å›¾(Sequence Diagram)::å¹¶è¡ŒåŒº/ä¸´ç•ŒåŒº</a></li><li><a href="https://blog.csdn.net/craftsman1970/article/details/71136232" target="_blank" rel="noopener">åºåˆ—å›¾(Sequence Diagram)::åŒæ­¥/å¼‚æ­¥</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»&lt;u&gt;å¾®æœåŠ¡APIç½‘å…³&lt;/u&gt;çš„&lt;strong&gt;å¾®æœåŠ¡è®¾è®¡&lt;/strong&gt;ï¼Œåˆ†ä¸º&lt;strong&gt;ä¸¤ä¸ª&lt;/strong&gt;æ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—è®¾è®¡ - &lt;strong&gt;æ—¶åºå›¾&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—è®¾è®¡ - &lt;strong&gt;æ—¶åºå›¾&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# å¾®æœåŠ¡APIç½‘å…³çš„è®¾è®¡ä¸å®ç°(4) æ•°æ®åº“è®¾è®¡</title>
    <link href="http://yoursite.com/2021/06/03/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(4)/"/>
    <id>http://yoursite.com/2021/06/03/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(4)/</id>
    <published>2021-06-02T23:00:21.000Z</published>
    <updated>2021-06-18T13:39:11.794Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»<u>å¾®æœåŠ¡APIç½‘å…³</u>çš„<strong>æ•°æ®åº“è®¾è®¡</strong>ï¼Œåˆ†ä¸º<strong>ä¸¤ä¸ª</strong>æ–¹é¢ï¼š</p><ul><li><code>MySQL</code> æ•°æ®åº“è¡¨è®¾è®¡ - <strong>E-Rå›¾åŠå…³ç³»æ¨¡å¼</strong></li><li><code>Redis</code> é”®å€¼è®¾è®¡</li></ul><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a><strong>æ•°æ®åº“</strong></h2><h3 id="æ•°æ®åº“ä¸‰èŒƒå¼"><a href="#æ•°æ®åº“ä¸‰èŒƒå¼" class="headerlink" title="æ•°æ®åº“ä¸‰èŒƒå¼"></a>æ•°æ®åº“ä¸‰èŒƒå¼</h3><ul><li>1NFæ˜¯å¯¹å±æ€§çš„<strong>åŸå­æ€§</strong>ï¼Œè¦æ±‚<strong>å±æ€§ä¸å¯å†åˆ†è§£</strong>ã€‚</li><li>2NFæ˜¯å¯¹è®°å½•çš„<strong>å”¯ä¸€æ€§</strong>ï¼Œè¦æ±‚è®°å½•æœ‰å”¯ä¸€æ ‡è¯†ï¼Œå³<strong>ä¸å­˜åœ¨éƒ¨åˆ†ä¾èµ–</strong>ã€‚</li><li>3NFæ˜¯å¯¹å­—æ®µçš„<strong>å†—ä½™æ€§</strong>ï¼Œè¦æ±‚ä»»ä½•å­—æ®µä¸èƒ½ç”±å…¶ä»–å­—æ®µä¸­æ´¾ç”Ÿå‡ºæ¥ï¼Œå³<strong>ä¸å­˜åœ¨ä¼ é€’ä¾èµ–</strong>ã€‚</li></ul><h3 id="ç»˜åˆ¶E-Rå›¾ä¾‹"><a href="#ç»˜åˆ¶E-Rå›¾ä¾‹" class="headerlink" title="ç»˜åˆ¶E-Rå›¾ä¾‹"></a>ç»˜åˆ¶E-Rå›¾ä¾‹</h3><ol><li>ç¡®å®šæ‰€æœ‰çš„å®ä½“ï¼ˆçŸ©å½¢æ¡†ï¼‰</li><li>ç¡®å®šå®ä½“çš„è”ç³»ï¼ˆè¿çº¿ï¼‰</li><li>ç¡®å®šå®ä½“å’Œè”ç³»çš„å±æ€§ï¼ˆæ¤­åœ†æ¡†ï¼‰</li><li>ç¡®å®šå®ä½“çš„é”®ï¼ˆä¸‹åˆ’çº¿ï¼‰</li></ol><h3 id="è½¬æ¢å…³ç³»æ¨¡å¼"><a href="#è½¬æ¢å…³ç³»æ¨¡å¼" class="headerlink" title="è½¬æ¢å…³ç³»æ¨¡å¼"></a>è½¬æ¢å…³ç³»æ¨¡å¼</h3><table><thead><tr><th align="center">ç±»å‹</th><th align="center">æ˜ å°„æ–¹æ³•</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">ä¸€å…ƒè”ç³»</td><td align="center">ç›´æ¥æ˜ å°„</td><td align="center">å®ä½“çš„å±æ€§â†’å…³ç³»æ¨¡å¼çš„å±æ€§ï¼›å®ä½“çš„ä¸»é”®â†’å…³ç³»æ¨¡å¼çš„ä¸»é”®</td></tr><tr><td align="center">äºŒå…ƒè”ç³» - ä¸€å¯¹ä¸€</td><td align="center">åˆå¹¶å…³ç³»æ¨¡å¼</td><td align="center">åˆæˆä¸€ä¸ªå…³ç³»æ¨¡å¼ <strong>R</strong>ï¼›ä»»ä¸€å®ä½“çš„å…¨éƒ¨ä¸»é”®â†’å…³ç³»æ¨¡å¼çš„ä¸»é”®</td></tr><tr><td align="center">äºŒå…ƒè”ç³» - ä¸€å¯¹å¤š</td><td align="center">å¼•å…¥å¤–é”®</td><td align="center">ä¸€æ–¹å®ä½“çš„ä¸»é”®â†’å¤šæ–¹å®ä½“çš„å¤–é”®ï¼›è”ç³»çš„å±æ€§â†’å¤šæ–¹å®ä½“çš„å±æ€§</td></tr><tr><td align="center">äºŒå…ƒè”ç³» - å¤šå¯¹å¤š</td><td align="center">å¢åŠ å…³ç³»æ¨¡å¼</td><td align="center">å¢åŠ ä¸€ä¸ªå…³ç³»æ¨¡å¼ <strong>R</strong>ï¼›ä¸¤ä¸ªå®ä½“çš„ä¸»é”®å¹¶é›†â†’å…³ç³»æ¨¡å¼çš„ä¸»é”®ï¼›è”ç³»çš„å±æ€§â†’å…³ç³»æ¨¡å¼çš„å±æ€§</td></tr><tr><td align="center">è¶…ç±»å­ç±»</td><td align="center">åˆ†åŒ–å…³ç³»æ¨¡å¼</td><td align="center">åˆ†åŒ–ä¸¤ä¸ªå…³ç³»æ¨¡å¼ <strong>R1 å’Œ R2</strong>ï¼›R1æ˜¯çˆ¶å…³ç³»æ¨¡å¼ï¼ŒåŒ…æ‹¬R1ä¸»é”®å’ŒR1éä¸»é”®ï¼›R2æ˜¯å­å…³ç³»æ¨¡å¼ï¼ŒåŒ…æ‹¬R1ä¸»é”®å’ŒR2éä¸»é”®ï¼›è‹¥æ¦‚æ‹¬æ˜¯å…¨éƒ¨çš„ï¼Œä¸ç”¨åˆ›å»ºçˆ¶å…³ç³»æ¨¡å¼ï¼Œå­å…³ç³»æ¨¡å¼åŒ…æ‹¬æ‰€æœ‰</td></tr><tr><td align="center">å¤åˆå±æ€§</td><td align="center">ç”±å­å±æ€§ä»£æ›¿</td><td align="center">å¤åˆå±æ€§ A â†’ å¤šä¸ªå­å±æ€§ä»£æ›¿ A1, A2, A3, â€¦</td></tr><tr><td align="center">å¤šå€¼å±æ€§</td><td align="center">æ‹†åˆ†å…³ç³»æ¨¡å¼</td><td align="center">æ‹†æˆä¸¤ä¸ªå…³ç³»æ¨¡å¼ <strong>R1 å’Œ R2</strong>ï¼›R1åŒ…æ‹¬Rçš„ä¸»é”®å’ŒMçš„æœ¬èº«ï¼›R2åŒ…æ‹¬Rçš„ä¸»é”®å’Œé™¤å¤šå€¼å±æ€§å¤–çš„å±æ€§ï¼›æ³¨æ„è®¾ç½®çº§è”æ“ä½œ</td></tr></tbody></table><h2 id="MySQL-æ•°æ®åº“è¡¨è®¾è®¡"><a href="#MySQL-æ•°æ®åº“è¡¨è®¾è®¡" class="headerlink" title="MySQL æ•°æ®åº“è¡¨è®¾è®¡"></a><strong>MySQL æ•°æ®åº“è¡¨è®¾è®¡</strong></h2><h3 id="ç”¨æˆ·çš„æ•°æ®åº“è¡¨è®¾è®¡"><a href="#ç”¨æˆ·çš„æ•°æ®åº“è¡¨è®¾è®¡" class="headerlink" title="ç”¨æˆ·çš„æ•°æ®åº“è¡¨è®¾è®¡"></a>ç”¨æˆ·çš„æ•°æ®åº“è¡¨è®¾è®¡</h3><p><img src="/images/user_er.png" alt="ç”¨æˆ·çš„E-Rå›¾"></p><h4 id="å®ä½“"><a href="#å®ä½“" class="headerlink" title="å®ä½“"></a>å®ä½“</h4><ul><li><u>ç”¨æˆ·å®ä½“</u>æ‹¥æœ‰<strong>ç”¨æˆ·IDã€ç”¨æˆ·åç§°ã€åŠ å¯†å¯†ç å’ŒåŠ å¯†ç›å€¼</strong>å››ç§å±æ€§ï¼Œå…¶ä¸­å‡ºäºå®‰å…¨æ€§çš„è€ƒè™‘ï¼Œå¯†ç éœ€è¦ç»è¿‡ç›å€¼åŠ å¯†åå­˜å‚¨åœ¨æ•°æ®åº“è€Œéç›´æ¥æ˜æ–‡å­˜å‚¨ã€‚</li></ul><h4 id="è”ç³»"><a href="#è”ç³»" class="headerlink" title="è”ç³»"></a>è”ç³»</h4><ul><li>æ²¡æœ‰è”ç³»å¯ä»¥åˆ†æã€‚</li></ul><h4 id="è½¬æ¢"><a href="#è½¬æ¢" class="headerlink" title="è½¬æ¢"></a>è½¬æ¢</h4><ul><li>å¯¹ç”¨æˆ·çš„E-Rå›¾è¿›è¡Œä¸€å…ƒè”ç³»ç±»å‹è½¬æ¢ï¼Œå¾—å‡ºå…³ç³»æ¨¡å¼ï¼š<strong>ç”¨æˆ·å®ä½“çš„å±æ€§ä¸ºç‹¬ç«‹çš„ä¸€å¼ è¡¨</strong>ã€‚</li></ul><h3 id="æœåŠ¡çš„æ•°æ®åº“è¡¨è®¾è®¡"><a href="#æœåŠ¡çš„æ•°æ®åº“è¡¨è®¾è®¡" class="headerlink" title="æœåŠ¡çš„æ•°æ®åº“è¡¨è®¾è®¡"></a>æœåŠ¡çš„æ•°æ®åº“è¡¨è®¾è®¡</h3><p><img src="/images/service_er.png" alt="æœåŠ¡çš„E-Rå›¾"></p><h4 id="å®ä½“-1"><a href="#å®ä½“-1" class="headerlink" title="å®ä½“"></a>å®ä½“</h4><ul><li><u>æœåŠ¡å®ä½“</u>æ‹¥æœ‰<strong>æœåŠ¡IDã€æœåŠ¡åç§°ã€æœåŠ¡æè¿°å’Œåè®®ç±»å‹</strong>å››ç§å±æ€§ï¼Œå…¶ä¸­åè®®ç±»å‹æ˜¯å¤šå€¼å±æ€§ï¼Œç”¨äºæ‰©å±•å’Œé€‚é…æ¥å…¥ä¸åŒåè®®çš„æœåŠ¡ï¼Œç›®å‰å¯æ”¯æŒ <code>HTTP</code>ã€<code>HTTPS</code> å’Œ <code>WebSocket</code> åè®®ã€‚</li><li><u>åè®®æ¥å…¥ä¸è¯·æ±‚é‡å†™é…ç½®å®ä½“</u>å›ºå®šå…·æœ‰<strong>åœ°å€å’Œé‡å†™è§„åˆ™</strong>å±æ€§ï¼Œä»åè®®æ¥å…¥ä¸è¯·æ±‚é‡å†™é…ç½®ä¸­å¯ä»¥æ³›åŒ–å‡ºå„ç§ç±»å‹çš„åè®®é…ç½®ï¼Œä¸åŒåè®®çš„é…ç½®å†…å®¹ä¸å°½ç›¸åŒã€‚</li><li><u>æƒé™è®¤è¯é…ç½®å®ä½“</u>åŒ…å«<strong>ipé»‘ç™½åå•</strong>çš„å±æ€§ï¼Œç”¨äºé‰´åˆ«è¯·æ±‚æ¥æºã€‚</li><li><u>æµé‡æ§åˆ¶é…ç½®å®ä½“</u>æ˜¯ç›¸å¯¹æœåŠ¡è€Œè¨€çš„ï¼Œå…·æœ‰<strong>é™æµé—´éš”å’Œé™æµæ¬¡æ•°</strong>å±æ€§ï¼Œå¯ä»¥æ”¯æŒå‘¨æœŸçµæ´»çš„é™æµç­–ç•¥ã€‚</li><li><u>è´Ÿè½½å‡è¡¡é…ç½®å®ä½“</u>æœ‰ä¸‰å¤§å±æ€§ï¼Œåˆ†åˆ«ä¸º<strong>ipåˆ—è¡¨ã€weightåˆ—è¡¨å’Œç®—æ³•ç±»å‹</strong>ï¼Œå…¶ä¸­ç®—æ³•ç±»å‹æ˜¯å¤šå€¼å±æ€§ï¼Œæ ‡è¯†äº†è´Ÿè½½å‡è¡¡ä½¿ç”¨çš„ç®—æ³•ï¼Œç›®å‰æ”¯æŒéšæœºè´Ÿè½½å‡è¡¡ã€è½®è¯¢è´Ÿè½½å‡è¡¡ã€åŠ æƒè½®è¯¢è´Ÿè½½å‡è¡¡å’Œä¸€è‡´æ€§å“ˆå¸Œè´Ÿè½½å‡è¡¡å››ç§ç®—æ³•ã€‚</li></ul><h4 id="è”ç³»-1"><a href="#è”ç³»-1" class="headerlink" title="è”ç³»"></a>è”ç³»</h4><ul><li>æœåŠ¡å®ä½“ä¸åè®®æ¥å…¥ä¸è¯·æ±‚é‡å†™é…ç½®å®ä½“ã€æƒé™è®¤è¯é…ç½®å®ä½“ã€æµé‡æ§åˆ¶é…ç½®å®ä½“ã€è´Ÿè½½å‡è¡¡é…ç½®å®ä½“å’Œåå‘ä»£ç†é…ç½®å®ä½“çš„å…³ç³»éƒ½æ˜¯<strong>ä¸€å¯¹ä¸€çš„æ‹¥æœ‰å…³ç³»</strong>ã€‚ç‰¹åˆ«åœ°ï¼Œåè®®æ¥å…¥é…ç½®å®ä½“å­˜åœ¨<strong>æ³›åŒ–</strong>ï¼Œå¯ä»¥è¡ç”Ÿå‡ºä¸åŒç±»å‹çš„åè®®æ¥å…¥ä¸è¯·æ±‚é‡å†™é…ç½®ã€‚</li></ul><h4 id="è½¬æ¢-1"><a href="#è½¬æ¢-1" class="headerlink" title="è½¬æ¢"></a>è½¬æ¢</h4><ul><li>å¯¹æœåŠ¡çš„E-Rå›¾è¿›è¡ŒäºŒå…ƒè”ç³»ç±»å‹è½¬æ¢ï¼Œå¾—å‡ºå…³ç³»æ¨¡å¼ï¼š<strong>æœåŠ¡å®ä½“ä¸æƒé™è®¤è¯é…ç½®å®ä½“ã€æµé‡æ§åˆ¶é…ç½®å®ä½“ã€è´Ÿè½½å‡è¡¡é…ç½®å®ä½“å’Œåå‘ä»£ç†é…ç½®å®ä½“åˆå¹¶ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œä¸ºäº†è€ƒè™‘åç»­å¯¹å…¶ä»–åè®®è¿›è¡Œæ‰©å±•ï¼Œæ•…æ¯ç§åè®®é…ç½®éƒ½å»ºè®®æ–°å»ºä¸€å¼ æ•°æ®åº“è¡¨</strong>ã€‚</li></ul><h3 id="åº”ç”¨çš„æ•°æ®åº“è¡¨è®¾è®¡"><a href="#åº”ç”¨çš„æ•°æ®åº“è¡¨è®¾è®¡" class="headerlink" title="åº”ç”¨çš„æ•°æ®åº“è¡¨è®¾è®¡"></a>åº”ç”¨çš„æ•°æ®åº“è¡¨è®¾è®¡</h3><p><img src="/images/app_er.png" alt="åº”ç”¨çš„E-Rå›¾"></p><h4 id="å®ä½“-2"><a href="#å®ä½“-2" class="headerlink" title="å®ä½“"></a>å®ä½“</h4><ul><li><u>åº”ç”¨å®ä½“</u>æ‹¥æœ‰<strong>åº”ç”¨IDã€åº”ç”¨æ ‡è¯†ã€åº”ç”¨åç§°å’Œåº”ç”¨å¯†é’¥</strong>å››ç§å±æ€§ï¼Œå…¶ä¸­å‡ºäºå®‰å…¨æ€§çš„è€ƒè™‘å¯†é’¥åº”è¯¥å­˜å‚¨åŠ å¯†åçš„å¯†æ–‡è€Œéæ˜æ–‡ã€‚</li><li><u>æƒé™è®¤è¯é…ç½®å®ä½“</u>åŒ…å«<strong>ipé»‘ç™½åå•</strong>çš„å±æ€§ï¼Œç”¨äºé‰´åˆ«è¯·æ±‚æ¥æºã€‚</li><li><u>æµé‡æ§åˆ¶é…ç½®å®ä½“</u>æ˜¯ç›¸å¯¹åº”ç”¨è€Œè¨€çš„ï¼Œå…·æœ‰<strong>QPDï¼ˆæ¯æ—¥è¯·æ±‚é‡ï¼‰é™åˆ¶å’ŒQPSï¼ˆæ¯ç§’è¯·æ±‚é‡ï¼‰é™åˆ¶</strong>ä¸¤ç§å±æ€§ã€‚</li></ul><h4 id="è”ç³»-2"><a href="#è”ç³»-2" class="headerlink" title="è”ç³»"></a>è”ç³»</h4><ul><li>åº”ç”¨å®ä½“ä¸æƒé™æ§åˆ¶é…ç½®å®ä½“å’Œæµé‡æ§åˆ¶é…ç½®å®ä½“çš„å…³ç³»éƒ½æ˜¯<strong>ä¸€å¯¹ä¸€çš„æ‹¥æœ‰å…³ç³»</strong>ã€‚</li></ul><h4 id="è½¬æ¢-2"><a href="#è½¬æ¢-2" class="headerlink" title="è½¬æ¢"></a>è½¬æ¢</h4><ul><li>å¯¹åº”ç”¨çš„E-Rå›¾è¿›è¡ŒäºŒå…ƒè”ç³»ç±»å‹è½¬æ¢ï¼Œå¾—å‡ºå…³ç³»æ¨¡å¼ï¼š<strong>æœåŠ¡å®ä½“ä¸æƒé™è®¤è¯é…ç½®å®ä½“å’Œæµé‡æ§åˆ¶é…ç½®å®ä½“åˆå¹¶ä¸ºä¸€å¼ æ•°æ®åº“è¡¨</strong>ã€‚</li></ul><h2 id="Redis-é”®å€¼è®¾è®¡"><a href="#Redis-é”®å€¼è®¾è®¡" class="headerlink" title="Redis é”®å€¼è®¾è®¡"></a><strong>Redis é”®å€¼è®¾è®¡</strong></h2><h3 id="ä¼šè¯çš„é”®å€¼è®¾è®¡"><a href="#ä¼šè¯çš„é”®å€¼è®¾è®¡" class="headerlink" title="ä¼šè¯çš„é”®å€¼è®¾è®¡"></a>ä¼šè¯çš„é”®å€¼è®¾è®¡</h3><table><thead><tr><th align="center">é”®</th><th align="center">å€¼ç±»å‹</th><th align="center">å€¼å†…å®¹</th></tr></thead><tbody><tr><td align="center">session_<code>{session_id}</code></td><td align="center">Binary</td><td align="center">ä¼šè¯ä¿¡æ¯</td></tr></tbody></table><h3 id="é…ç½®çš„é”®å€¼è®¾è®¡"><a href="#é…ç½®çš„é”®å€¼è®¾è®¡" class="headerlink" title="é…ç½®çš„é”®å€¼è®¾è®¡"></a>é…ç½®çš„é”®å€¼è®¾è®¡</h3><table><thead><tr><th align="center">é”®</th><th align="center">å€¼ç±»å‹</th><th align="center">å€¼å†…å®¹</th></tr></thead><tbody><tr><td align="center">app_<code>{app_id}</code></td><td align="center">String</td><td align="center">app po as json</td></tr><tr><td align="center">service_<code>{service_id}</code></td><td align="center">String</td><td align="center">service po as json</td></tr><tr><td align="center">lb_<code>{lb_id}</code></td><td align="center">String</td><td align="center">load balance po as json</td></tr><tr><td align="center">ac_<code>{ac_id}</code></td><td align="center">String</td><td align="center">access control po as json</td></tr></tbody></table><h3 id="è®¡æ•°å™¨çš„é”®å€¼è®¾è®¡"><a href="#è®¡æ•°å™¨çš„é”®å€¼è®¾è®¡" class="headerlink" title="è®¡æ•°å™¨çš„é”®å€¼è®¾è®¡"></a>è®¡æ•°å™¨çš„é”®å€¼è®¾è®¡</h3><table><thead><tr><th align="center">é”®</th><th align="center">å€¼ç±»å‹</th><th align="center">å€¼å†…å®¹</th></tr></thead><tbody><tr><td align="center">flow_day_count_<code>{day_format}</code>_flow_total_count</td><td align="center">String</td><td align="center">æ€»è®¡æ¯ä¸€å¤©çš„æµé‡ç»Ÿè®¡æ•°</td></tr><tr><td align="center">flow_hour_count_<code>{hour_format}</code>_flow_total_count</td><td align="center">String</td><td align="center">æ€»è®¡æ¯å°æ—¶çš„æµé‡ç»Ÿè®¡æ•°</td></tr><tr><td align="center">flow_day_count_<code>{day_format}</code>_flow_service_count_<code>{service_name}</code></td><td align="center">String</td><td align="center">å•ä¸ªæœåŠ¡æ¯ä¸€å¤©çš„æµé‡ç»Ÿè®¡æ•°</td></tr><tr><td align="center">flow_hour_count_<code>{hour_format}</code>_flow_service_count_<code>{service_name}</code></td><td align="center">String</td><td align="center">å•ä¸ªæœåŠ¡æ¯å°æ—¶çš„æµé‡ç»Ÿè®¡æ•°</td></tr><tr><td align="center">flow_day_count_<code>{day_format}</code>_flow_app_count_<code>{app_id}</code></td><td align="center">String</td><td align="center">å•ä¸ªåº”ç”¨æ¯ä¸€å¤©çš„æµé‡ç»Ÿè®¡æ•°</td></tr><tr><td align="center">flow_hour_count_<code>{hour_format}</code>_flow_app_count_<code>{app_id}</code></td><td align="center">String</td><td align="center">å•ä¸ªåº”ç”¨æ¯å°æ—¶çš„æµé‡ç»Ÿè®¡æ•°</td></tr></tbody></table><h3 id="é™æµå™¨çš„é”®å€¼è®¾è®¡"><a href="#é™æµå™¨çš„é”®å€¼è®¾è®¡" class="headerlink" title="é™æµå™¨çš„é”®å€¼è®¾è®¡"></a>é™æµå™¨çš„é”®å€¼è®¾è®¡</h3><table><thead><tr><th align="center">é”®</th><th align="center">å€¼ç±»å‹</th><th align="center">å€¼å†…å®¹</th></tr></thead><tbody><tr><td align="center">rate_flow_service_count_<code>{service_name}</code></td><td align="center">String</td><td align="center">å•ä¸ªæœåŠ¡è°ƒç”¨ç»“æŸçš„æ—¶é—´ç‚¹</td></tr><tr><td align="center">rate_flow_app_count_<code>{app_id}</code></td><td align="center">String</td><td align="center">å•ä¸ªåº”ç”¨è°ƒç”¨ç»“æŸçš„æ—¶é—´ç‚¹</td></tr></tbody></table><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a><strong>Refs</strong></h2><ul><li><a href="https://segmentfault.com/a/1190000013695030" target="_blank" rel="noopener">æ•°æ®åº“é€»è¾‘è®¾è®¡ä¹‹ä¸‰å¤§èŒƒå¼é€šä¿—ç†è§£</a></li><li><a href="https://zhuanlan.zhihu.com/p/29029129#:~:text=er%E5%9B%BE%E7%9A%84%E5%B1%9E%E6%80%A7%E8%BF%98,%E5%92%8C%E5%90%8D%E5%AD%97%E5%B1%9E%E6%80%A7%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE%EF%BC%9A&text=%E6%B4%BE%E7%94%9F%E5%B1%9E%E6%80%A7(derivers%20attribute)%EF%BC%9A,%E5%AD%98%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%B1%9E%E6%80%A7%E3%80%82" target="_blank" rel="noopener">æ•°æ®åº“ERå›¾åŸºç¡€æ¦‚å¿µæ•´ç†</a></li><li><a href="https://zhuanlan.zhihu.com/p/74394591" target="_blank" rel="noopener">å¦‚ä½•ç”»å¥½ERå›¾</a></li><li><a href="https://www.pianshen.com/article/1262363338/" target="_blank" rel="noopener">å°†E-Rå›¾è½¬æ¢æˆå…³ç³»æ¨¡å¼</a></li><li><a href="https://lanlan2017.github.io/ReadingNotes/ef76614/" target="_blank" rel="noopener">æ•°æ®åº“è®¾è®¡è¿‡ç¨‹</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»&lt;u&gt;å¾®æœåŠ¡APIç½‘å…³&lt;/u&gt;çš„&lt;strong&gt;æ•°æ®åº“è®¾è®¡&lt;/strong&gt;ï¼Œåˆ†ä¸º&lt;strong&gt;ä¸¤ä¸ª&lt;/strong&gt;æ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;MySQL&lt;/code&gt; æ•°æ®åº“è¡¨è®¾è®¡ - &lt;strong&gt;E-Rå›¾åŠå…³ç³»æ¨¡å¼&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Redis&lt;/code&gt; é”®å€¼è®¾è®¡&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# å¾®æœåŠ¡APIç½‘å…³çš„è®¾è®¡ä¸å®ç°(2) æ•´ä½“è®¾è®¡</title>
    <link href="http://yoursite.com/2021/06/02/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(2)/"/>
    <id>http://yoursite.com/2021/06/02/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(2)/</id>
    <published>2021-06-01T23:00:21.000Z</published>
    <updated>2021-06-18T07:08:21.131Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»<u>å¾®æœåŠ¡APIç½‘å…³</u>çš„<strong>æ•´ä½“è®¾è®¡</strong>ï¼Œåˆ†ä¸º<strong>ä¸¤ä¸ª</strong>æ–¹é¢ï¼š</p><ul><li>é€»è¾‘æ¶æ„</li><li>è°ƒç”¨å…³ç³»</li></ul><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><h2 id="é€»è¾‘æ¶æ„"><a href="#é€»è¾‘æ¶æ„" class="headerlink" title="é€»è¾‘æ¶æ„"></a><strong>é€»è¾‘æ¶æ„</strong></h2><ul><li>ä¸‹å›¾æ˜¯<u>å¾®æœåŠ¡APIç½‘å…³çš„æ•´ä½“é€»è¾‘æ¶æ„å›¾</u>ï¼Œå±•ç¤ºäº†å¾®æœåŠ¡APIç½‘å…³çš„ç»„æˆéƒ¨åˆ†å’Œé€»è¾‘åŠŸèƒ½ã€‚å¾®æœåŠ¡APIç½‘å…³ç”±<strong>ç®¡ç†æ¨¡å—</strong>å’Œ<strong>æ ¸å¿ƒæ¨¡å—</strong>ä¸¤ä¸ªå¾®æœåŠ¡æä¾›ä¸»è¦åŠŸèƒ½ï¼ŒåŒæ—¶è¿˜ä¾èµ–<strong>æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°ä¸­å¿ƒ</strong>æä¾›æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°ï¼Œä»¥åŠ<strong>æ•°æ®åº“å±‚</strong>æä¾›æ•°æ®çš„ç¼“å­˜å’ŒæŒä¹…åŒ–ã€‚</li></ul><p><img src="/images/microservice_api_gateway_arch.png" alt="å¾®æœåŠ¡APIç½‘å…³é€»è¾‘æ¶æ„å›¾"></p><ol><li><strong>å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—</strong>ï¼Œå†…ç½®äº†UIç•Œé¢å±‚æä¾›å¯è§†åŒ–çš„ç®¡ç†å¹³å°ï¼Œè¯·æ±‚ç»ç”±APIæ¥å£å±‚å¯ä»¥è®¿é—®ç”¨æˆ·ç™»å½•ã€ç”¨æˆ·ç™»å‡ºã€ç®¡ç†æœåŠ¡ã€ç®¡ç†åº”ç”¨ã€ç®¡ç†ç”¨æˆ·å’Œæ•°æ®ç»Ÿè®¡ç­‰åŠŸèƒ½ï¼Œå®ç°ä¸€ç«™å¼çš„ç½‘å…³é…ç½®ç®¡ç†ã€‚</li><li><strong>å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—</strong>ï¼Œç”±åè®®æ¥å…¥ä¸­é—´ä»¶è¯†åˆ«è¯·æ±‚å’ŒåŒ¹é…é…ç½®ï¼Œæƒé™è®¤è¯ã€è¯·æ±‚é‡å†™ã€æµé‡ç»Ÿè®¡å’Œæµé‡æ§åˆ¶ä¸­é—´ä»¶è¿›è¡Œå…¬å…±ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œè´Ÿè½½å‡è¡¡ä¸­é—´ä»¶ä»æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°ä¸­å¿ƒå‘ç°å¯ç”¨æœåŠ¡åˆ—è¡¨å¹¶åº”ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•æ‰¾å‡ºåˆé€‚çš„å“åº”å®ä¾‹ï¼Œåå‘ä»£ç†æ ¹æ®è´Ÿè½½å‡è¡¡åœ°å€å°†è¯·æ±‚è½¬å‘è‡³æœåŠ¡ç«¯æœåŠ¡å¹¶è¿”å›å“åº”ç»™å®¢æˆ·ç«¯åº”ç”¨ã€‚</li><li><strong>æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°ä¸­å¿ƒ</strong>ï¼ŒæŠ€æœ¯é€‰å‹ä¸ºå¼€ç®±å³ç”¨çš„ <code>Consul</code>ï¼Œä¸»è¦æä¾›æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°çš„åŠŸèƒ½ã€‚å¯¹æœåŠ¡ç«¯æœåŠ¡è€Œè¨€ï¼Œæä¾›æœåŠ¡æ³¨å†Œçš„ç»Ÿä¸€å­˜å‚¨ä½ç½®ï¼Œä¿å­˜æœåŠ¡çš„åç§°ã€åœ°å€ã€ç«¯å£å’Œæ ‡ç­¾ç­‰å…ƒæ•°æ®ä¿¡æ¯ï¼Œè¿˜å¯ä»¥å¯¹å·²æ³¨å†Œçš„æœåŠ¡è¿›è¡Œè‡ªå®šä¹‰çš„å‘¨æœŸæ€§å¥åº·æ£€æŸ¥ã€‚å¯¹äºå¾®æœåŠ¡APIç½‘å…³è€Œè¨€ï¼Œè´Ÿè½½å‡è¡¡ä¸­é—´ä»¶å¯ä»¥æ ¹æ®æœåŠ¡åå‘ç°å¯ç”¨çš„æœåŠ¡å®ä¾‹åœ°å€ï¼Œå¹¶åŠ¨æ€ç›‘å¬è¿™äº›åœ°å€çš„å¯ç”¨æƒ…å†µå’ŒçŠ¶æ€å˜åŒ–ï¼ŒåŠæ—¶æ›´æ–°è´Ÿè½½å‡è¡¡çš„åœ°å€åˆ—è¡¨ã€‚</li><li><strong>æ•°æ®åº“å±‚</strong>ï¼ŒåŒ…æ‹¬ <code>MySQL</code> å…³ç³»å‹æ•°æ®åº“å’Œ <code>Redis</code> éå…³ç³»å‹æ•°æ®åº“ã€‚<code>MySQL</code> ç”¨äºæŒä¹…åŒ–ç”¨æˆ·ã€æœåŠ¡å’Œåº”ç”¨çš„ä¿¡æ¯ï¼Œæ˜¯ä¸šåŠ¡æ•°æ®å­˜æ”¾çš„ä½ç½®å’Œç¼“å­˜æ•°æ®åŒæ­¥çš„æ¥æºã€‚<code>Redis</code> ç”¨ä½œç¼“å­˜å’Œè®¡æ•°å™¨ï¼ŒåŠ å¿«å¾®æœåŠ¡APIç½‘å…³å¤„ç†å®¢æˆ·ç«¯åº”ç”¨è¯·æ±‚çš„é€Ÿåº¦ï¼Œå®ç°ç³»ç»Ÿæµé‡çš„ç»Ÿè®¡å’Œç›‘æ§ï¼Œå¹¶æ ¹æ®ç­–ç•¥æ§åˆ¶æµé‡çš„è¿›å‡ºã€‚</li></ol><h2 id="è°ƒç”¨å…³ç³»"><a href="#è°ƒç”¨å…³ç³»" class="headerlink" title="è°ƒç”¨å…³ç³»"></a><strong>è°ƒç”¨å…³ç³»</strong></h2><ul><li>ä¸‹å›¾æ˜¯<u>å¾®æœåŠ¡APIç½‘å…³çš„æ•´ä½“è°ƒç”¨å…³ç³»å›¾</u>ï¼Œå±•ç¤ºäº†å¾®æœåŠ¡APIç½‘å…³å„æ¨¡å—åŠå…¶ä¾èµ–ä½œä¸ºä¸€ä¸ªæ•´ä½“å¦‚ä½•ä¸å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œäº¤äº’çš„è¿‡ç¨‹ã€‚å…¶ä¸­<strong>å®¢æˆ·ç«¯</strong>ç”±ç®¡ç†å‘˜ç”¨æˆ·ã€<code>Web/App</code> åº”ç”¨ç»„æˆï¼Œ<strong>å¾®æœåŠ¡APIç½‘å…³</strong>ç”±ç®¡ç†æ¨¡å—ã€æ ¸å¿ƒæ¨¡å—ã€<code>MySQL</code>ã€<code>Redis</code> å’Œ <code>Consul</code> ç»„æˆï¼Œ<strong>æœåŠ¡ç«¯</strong>ç”±å¾®æœåŠ¡ç»„æˆã€‚</li></ul><p><img src="/images/microservice_api_gateway_call.png" alt="å¾®æœåŠ¡APIç½‘å…³è°ƒç”¨å…³ç³»å›¾"></p><ol><li><strong>ç¬¬1æ­¥</strong>ï¼ŒæœåŠ¡ç«¯çš„å¾®æœåŠ¡å…ˆåœ¨æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°ä¸­å¿ƒ <code>Consul</code> ä¸­æ³¨å†Œè¯¥å¾®æœåŠ¡çš„åç§°å’Œåœ°å€ã€‚</li><li><strong>ç¬¬2æ­¥</strong>ï¼Œå®¢æˆ·ç«¯çš„ç®¡ç†å‘˜ç”¨æˆ·åœ¨ç®¡ç†æ¨¡å—ä¸­é…ç½®æœåŠ¡å’Œåº”ç”¨ã€‚</li><li><strong>ç¬¬3æ­¥</strong>ï¼Œé…ç½®æˆåŠŸå†™å…¥ <code>MySQL</code> å…³ç³»å‹æ•°æ®åº“å’Œ <code>Redis</code> éå…³ç³»å‹æ•°æ®åº“ä¸­ã€‚</li><li><strong>ç¬¬4æ­¥</strong>ï¼Œå®¢æˆ·ç«¯çš„ <code>Web</code> åº”ç”¨æˆ– <code>App</code> åº”ç”¨å³å¯é€šè¿‡æ ¸å¿ƒæ¨¡å—è¯·æ±‚æœåŠ¡ç«¯çš„å¾®æœåŠ¡ã€‚</li><li><strong>ç¬¬5æ­¥</strong>ï¼Œæ ¸å¿ƒæ¨¡å—åœ¨ <code>Redis</code> ç¼“å­˜ä¸­è¯»å–æœåŠ¡å’Œåº”ç”¨çš„é…ç½®ã€‚</li><li><strong>ç¬¬6æ­¥</strong>ï¼Œæ ¸å¿ƒæ¨¡å—åœ¨æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°ä¸­å¿ƒ <code>Consul</code> ä¸­è·å–å¯ç”¨çš„åœ°å€åˆ—è¡¨ã€‚</li><li><strong>ç¬¬7æ­¥</strong>ï¼Œç»è¿‡æ ¸å¿ƒæ¨¡å—çš„ä¸€ç³»åˆ—å…¬å…±ä¸šåŠ¡é€»è¾‘ä¸­é—´ä»¶å¤„ç†åï¼Œè¯·æ±‚è¢«åå‘ä»£ç†åˆ°å·²æ³¨å†Œçš„å¾®æœåŠ¡ï¼ŒæœåŠ¡ç«¯çš„å¾®æœåŠ¡æ¥æ”¶åˆ°è¯·æ±‚å¹¶å¤„ç†åè¿”å›å“åº”ç»™æ ¸å¿ƒæ¨¡å—ï¼Œæ ¸å¿ƒæ¨¡å—å†è¿”å›å“åº”ç»™å®¢æˆ·ç«¯çš„åº”ç”¨ã€‚</li></ol><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»&lt;u&gt;å¾®æœåŠ¡APIç½‘å…³&lt;/u&gt;çš„&lt;strong&gt;æ•´ä½“è®¾è®¡&lt;/strong&gt;ï¼Œåˆ†ä¸º&lt;strong&gt;ä¸¤ä¸ª&lt;/strong&gt;æ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€»è¾‘æ¶æ„&lt;/li&gt;
&lt;li&gt;è°ƒç”¨å…³ç³»&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# å¾®æœåŠ¡APIç½‘å…³çš„è®¾è®¡ä¸å®ç°(1) éœ€æ±‚åˆ†æ</title>
    <link href="http://yoursite.com/2021/06/01/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(1)/"/>
    <id>http://yoursite.com/2021/06/01/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0(1)/</id>
    <published>2021-05-31T23:00:21.000Z</published>
    <updated>2021-06-20T12:45:09.180Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»<u>å¾®æœåŠ¡APIç½‘å…³</u>çš„<strong>éœ€æ±‚åˆ†æ</strong>ï¼Œåˆ†ä¸º<strong>ä¸¤ä¸ª</strong>æ–¹é¢ï¼š</p><ul><li>åŠŸèƒ½æ€§éœ€æ±‚åˆ†æ - <strong>ç”¨ä¾‹å›¾å’Œç”¨ä¾‹è¡¨</strong></li><li>éåŠŸèƒ½æ€§éœ€æ±‚åˆ†æ</li></ul><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><h2 id="UML"><a href="#UML" class="headerlink" title="UML"></a><strong>UML</strong></h2><h3 id="ç”¨ä¾‹å›¾"><a href="#ç”¨ä¾‹å›¾" class="headerlink" title="ç”¨ä¾‹å›¾"></a>ç”¨ä¾‹å›¾</h3><ul><li><u>ç”¨ä¾‹å›¾</u>ä¸€èˆ¬ç”±<strong>å‚ä¸è€…ã€ç”¨ä¾‹ã€ç³»ç»Ÿè¾¹ç•Œå’Œå…³ç³»</strong>æ„æˆã€‚</li></ul><table><thead><tr><th align="center">å…³ç³»ç±»å‹</th><th>å…ƒç´ </th><th align="center">è¯´æ˜</th><th align="center">æ¡ä»¶æ€§</th><th align="center">ç›´æ¥æ€§</th><th align="center">ç®­å¤´æŒ‡å‘</th></tr></thead><tbody><tr><td align="center">å…³è”</td><td>å‚ä¸è€…ä¸ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»</td><td align="center">å‚ä¸è€…å’Œç”¨ä¾‹é€šä¿¡</td><td align="center">-</td><td align="center">-</td><td align="center">å‘é€æ–¹æŒ‡å‘æ¥å—æ–¹</td></tr><tr><td align="center">æ³›åŒ–</td><td>å‚ä¸è€…ä¹‹é—´æˆ–ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»</td><td align="center">å­å…ƒç´ ç»§æ‰¿çˆ¶å…ƒç´ </td><td align="center">æ— </td><td align="center">ç›´æ¥</td><td align="center">å­å…ƒç´ æŒ‡å‘çˆ¶å…ƒç´ </td></tr><tr><td align="center">åŒ…å«</td><td>ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»</td><td align="center">å¤æ‚ç”¨ä¾‹æ‹†æˆç®€å•ç”¨ä¾‹</td><td align="center">æ— </td><td align="center">é—´æ¥</td><td align="center">å¤æ‚ç”¨ä¾‹æŒ‡å‘ç®€å•ç”¨ä¾‹</td></tr><tr><td align="center">æ‰©å±•</td><td>ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»</td><td align="center">åŸºç¡€ç”¨ä¾‹å¢åŠ é™„åŠ ç”¨ä¾‹</td><td align="center">æœ‰</td><td align="center">ç›´æ¥</td><td align="center">åŸºç¡€ç”¨ä¾‹æŒ‡å‘é™„åŠ ç”¨ä¾‹</td></tr></tbody></table><h3 id="ç”¨ä¾‹è¡¨"><a href="#ç”¨ä¾‹è¡¨" class="headerlink" title="ç”¨ä¾‹è¡¨"></a>ç”¨ä¾‹è¡¨</h3><ul><li><u>ç”¨ä¾‹è¡¨</u>ä¸€èˆ¬ç”±<strong>ç”¨ä¾‹ç¼–å·ã€ç”¨ä¾‹åç§°ã€å‚ä¸è€…ã€ç”¨ä¾‹æè¿°ã€å‰ç½®æ¡ä»¶ã€åç½®æ¡ä»¶ã€æ­£å¸¸æµç¨‹å’Œå¼‚å¸¸æµç¨‹</strong>æ„æˆã€‚</li></ul><table><thead><tr><th align="center">æ¡ç›®</th><th align="center">å†…å®¹</th></tr></thead><tbody><tr><td align="center">ç”¨ä¾‹ç¼–å·</td><td align="center"><code>[æ•°å­—]</code></td></tr><tr><td align="center">ç”¨ä¾‹åç§°</td><td align="center"><code>[åŠ¨å®¾ç»“æ„]</code></td></tr><tr><td align="center">å‚ä¸è€…</td><td align="center"><code>[ä¸»è¯­]</code></td></tr><tr><td align="center">ç”¨ä¾‹æè¿°</td><td align="center"><code>[ç›¸äº’ç‹¬ç«‹ï¼›å¯ä»¥è§‚æµ‹]</code></td></tr><tr><td align="center">å‰ç½®æ¡ä»¶</td><td align="center"><code>[åˆ†ç‚¹è¯´æ˜]</code></td></tr><tr><td align="center">åç½®æ¡ä»¶</td><td align="center"><code>[åˆ†ç‚¹è¯´æ˜]</code></td></tr><tr><td align="center">æ­£å¸¸æµç¨‹</td><td align="center"><code>[æ­£å¸¸æ“ä½œâ†’æ­£å¸¸ç»“æœ]</code></td></tr><tr><td align="center">å¼‚å¸¸æµç¨‹</td><td align="center"><code>[å¼‚å¸¸æ“ä½œâ†’å¼‚å¸¸ç»“æœ]</code></td></tr></tbody></table><h2 id="åŠŸèƒ½æ€§éœ€æ±‚åˆ†æ"><a href="#åŠŸèƒ½æ€§éœ€æ±‚åˆ†æ" class="headerlink" title="åŠŸèƒ½æ€§éœ€æ±‚åˆ†æ"></a><strong>åŠŸèƒ½æ€§éœ€æ±‚åˆ†æ</strong></h2><h3 id="å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—ç”¨ä¾‹"><a href="#å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—ç”¨ä¾‹" class="headerlink" title="å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—ç”¨ä¾‹"></a>å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—ç”¨ä¾‹</h3><ul><li>ä¸‹å›¾ä¸º<u>å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—çš„ç”¨ä¾‹å›¾</u>ï¼Œå…¶å±•ç¤ºäº†åœ¨ç®¡ç†æ¨¡å—ä¸­ï¼Œç®¡ç†å‘˜ç”¨æˆ·ä½œä¸ºå‚ä¸è€…ä¸ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»ä»¥åŠä¸»ç”¨ä¾‹å’Œå­ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»ã€‚æ ¹æ®åˆ†æï¼Œç®¡ç†æ¨¡å—å…±æœ‰6ä¸ªä¸»è¦çš„ç”¨ä¾‹ï¼Œåˆ†åˆ«ä¸º<strong>ç”¨æˆ·ç™»å½•ã€ç”¨æˆ·ç™»å‡ºã€ç®¡ç†ç”¨æˆ·ã€ç®¡ç†æœåŠ¡ã€ç®¡ç†åº”ç”¨å’Œæ•°æ®ç»Ÿè®¡</strong>ã€‚</li></ul><p><img src="/images/admin_use_case.png" alt="å¾®æœåŠ¡APIç½‘å…³ç®¡ç†æ¨¡å—ç”¨ä¾‹å›¾"></p><h3 id="å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—ç”¨ä¾‹"><a href="#å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—ç”¨ä¾‹" class="headerlink" title="å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—ç”¨ä¾‹"></a>å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—ç”¨ä¾‹</h3><ul><li>ä¸‹å›¾ä¸º<u>å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—çš„ç”¨ä¾‹å›¾</u>ï¼Œå…¶å±•ç¤ºäº†åœ¨æ ¸å¿ƒæ¨¡å—ä¸­ï¼Œæ™®é€šç”¨æˆ·ä½œä¸ºå‚ä¸è€…ä¸ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»ä»¥åŠä¸»ç”¨ä¾‹å’Œå­ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»ã€‚æ ¹æ®åˆ†æï¼Œæ ¸å¿ƒæ¨¡å—å…±æœ‰7ä¸ªä¸»è¦çš„ç”¨ä¾‹ï¼Œåˆ†åˆ«ä¸º<strong>åè®®æ¥å…¥ã€æƒé™è®¤è¯ã€æµé‡ç»Ÿè®¡ã€æµé‡æ§åˆ¶ã€è¯·æ±‚é‡å†™ã€è´Ÿè½½å‡è¡¡å’Œåå‘ä»£ç†</strong>ã€‚</li></ul><p><img src="/images/core_use_case.png" alt="å¾®æœåŠ¡APIç½‘å…³æ ¸å¿ƒæ¨¡å—ç”¨ä¾‹å›¾"></p><h2 id="éåŠŸèƒ½æ€§éœ€æ±‚åˆ†æ"><a href="#éåŠŸèƒ½æ€§éœ€æ±‚åˆ†æ" class="headerlink" title="éåŠŸèƒ½æ€§éœ€æ±‚åˆ†æ"></a><strong>éåŠŸèƒ½æ€§éœ€æ±‚åˆ†æ</strong></h2><hr><h3 id="å®‰å…¨æ€§"><a href="#å®‰å…¨æ€§" class="headerlink" title="å®‰å…¨æ€§"></a>å®‰å…¨æ€§</h3><ul><li><strong>å¯¹äºç”¨æˆ·æ“ä½œè€Œè¨€</strong>ï¼šåº”ç”¨å£ä»¤å®‰å…¨è¦æ±‚å’Œä¼šè¯è¶…æ—¶æœºåˆ¶</li><li><strong>å¯¹äºè¯·æ±‚è®¿é—®è€Œè¨€</strong>ï¼šè®¾ç½® <code>JWT</code> æ ¡éªŒå’Œ <code>IP</code> æ ¡éªŒ</li><li><strong>å¯¹äºæ•°æ®ä¼ è¾“è€Œè¨€</strong>ï¼šå¯åŠ¨ <code>HTTPS</code> ç›‘å¬</li><li><strong>å¯¹äºæ•°æ®ä¿å­˜è€Œè¨€</strong>ï¼šæ•æ„Ÿä¿¡æ¯ä½¿ç”¨ç›å€¼åŠ å¯†å¹¶ä»¥å¯†æ–‡æ–¹å¼å…¥åº“</li></ul><h3 id="é«˜æ€§èƒ½"><a href="#é«˜æ€§èƒ½" class="headerlink" title="é«˜æ€§èƒ½"></a>é«˜æ€§èƒ½</h3><ul><li>é€‰ç”¨æ€§èƒ½è¡¨ç°ä¼˜ç§€ã€åŠŸèƒ½æ”¯æŒé½å…¨çš„æ¡†æ¶ <code>Gin</code></li><li>å…ˆè®¿é—®ç¼“å­˜ <code>Redis</code> ä»£æ›¿ç›´æ¥è®¿é—®æ•°æ®åº“ <code>MySQL</code></li></ul><h3 id="é«˜å¯ç”¨"><a href="#é«˜å¯ç”¨" class="headerlink" title="é«˜å¯ç”¨"></a>é«˜å¯ç”¨</h3><ul><li><strong>æ•…éšœæ—¶ä»ç¨³å®šæœåŠ¡</strong>ï¼šè¿›è¡Œå¤šå®ä¾‹éƒ¨ç½²ï¼Œå‘¨æœŸæ¢æ´»å¹¶æ•…éšœé‡å¯</li><li><strong>å®¹æ˜“æ¨ªå‘æ‰©å±•å®ä¾‹</strong>ï¼šå¼¹æ€§ä¼¸ç¼©&amp;&amp;è´Ÿè½½å‡è¡¡</li></ul><h3 id="æ˜“ç”¨æ€§"><a href="#æ˜“ç”¨æ€§" class="headerlink" title="æ˜“ç”¨æ€§"></a>æ˜“ç”¨æ€§</h3><ul><li>ç»Ÿä¸€çš„ <code>RESTful API</code> æ¥å£</li><li>ç›´è§‚çš„ <code>Vue-Element-Admin</code> ç•Œé¢ </li></ul><h2 id="FAQs"><a href="#FAQs" class="headerlink" title="FAQs"></a><strong>FAQs</strong></h2><blockquote><p><strong>Qï¼š</strong>å¦‚ä½•æ§åˆ¶ç”¨ä¾‹çš„ç²’åº¦å‘¢ï¼Ÿ</p><p><strong>Aï¼š</strong>å‚è€ƒ<a href="https://www.cnblogs.com/HeroBeast/archive/2009/09/27/1575094.html" target="_blank" rel="noopener">ç”¨ä¾‹çš„ç±»å‹ä¸ç²’åº¦</a></p></blockquote><h2 id="Refs"><a href="#Refs" class="headerlink" title="Refs"></a><strong>Refs</strong></h2><ul><li><a href="https://www.cnblogs.com/Yogurshine/archive/2013/01/14/2859248.html" target="_blank" rel="noopener">UMLç³»åˆ—-ç”¨ä¾‹å›¾</a></li><li><a href="https://www.jianshu.com/p/7ff70e28bb72" target="_blank" rel="noopener">è°ˆè°ˆéœ€æ±‚çš„æè¿°-ç”¨ä¾‹</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»&lt;u&gt;å¾®æœåŠ¡APIç½‘å…³&lt;/u&gt;çš„&lt;strong&gt;éœ€æ±‚åˆ†æ&lt;/strong&gt;ï¼Œåˆ†ä¸º&lt;strong&gt;ä¸¤ä¸ª&lt;/strong&gt;æ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŠŸèƒ½æ€§éœ€æ±‚åˆ†æ - &lt;strong&gt;ç”¨ä¾‹å›¾å’Œç”¨ä¾‹è¡¨&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;éåŠŸèƒ½æ€§éœ€æ±‚åˆ†æ&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
  <entry>
    <title>#Grpc# æ€ç»´å¯¼å›¾ï¼šGrpc Rpc Framework</title>
    <link href="http://yoursite.com/2021/05/04/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BGrpc/"/>
    <id>http://yoursite.com/2021/05/04/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BGrpc/</id>
    <published>2021-05-03T23:00:21.000Z</published>
    <updated>2021-07-25T15:09:11.684Z</updated>
    
    <content type="html"><![CDATA[<p>å¤‡ä»½è®°å½• <code>Grpc</code> çš„<strong>æ€ç»´å¯¼å›¾</strong>å’Œ<strong>ç›¸å…³æ–‡æ¡£</strong>ã€‚</p><hr><a id="more"></a><h1 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a><strong>æ€ç»´å¯¼å›¾</strong></h1><p><img src="/images/Grpc.png" alt="Grpc Mindmap"></p><p><img src="/images/grpc_rest_gateway.png" alt="ç½‘å…³ç»“æ„å›¾ç¤º"></p><h1 id="ç›¸å…³æ–‡æ¡£"><a href="#ç›¸å…³æ–‡æ¡£" class="headerlink" title="ç›¸å…³æ–‡æ¡£"></a><strong>ç›¸å…³æ–‡æ¡£</strong></h1><ul><li><a href="http://www.topgoer.com/%E5%BE%AE%E6%9C%8D%E5%8A%A1/gRPC/" target="_blank" rel="noopener">gRPC</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤‡ä»½è®°å½• &lt;code&gt;Grpc&lt;/code&gt; çš„&lt;strong&gt;æ€ç»´å¯¼å›¾&lt;/strong&gt;å’Œ&lt;strong&gt;ç›¸å…³æ–‡æ¡£&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Mind Map" scheme="http://yoursite.com/categories/Mind-Map/"/>
    
    
    <category term="Golang" scheme="http://yoursite.com/tags/Golang/"/>
    
    <category term="Grpc" scheme="http://yoursite.com/tags/Grpc/"/>
    
  </entry>
  
  <entry>
    <title>#Go-Micro# æ€ç»´å¯¼å›¾ï¼šGo-Micro Microservice Framework</title>
    <link href="http://yoursite.com/2021/05/03/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BGo-Micro/"/>
    <id>http://yoursite.com/2021/05/03/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BGo-Micro/</id>
    <published>2021-05-02T23:00:21.000Z</published>
    <updated>2021-07-25T15:02:48.858Z</updated>
    
    <content type="html"><![CDATA[<p>å¤‡ä»½è®°å½• <code>Go-Micro</code> çš„<strong>æ€ç»´å¯¼å›¾</strong>å’Œ<strong>ç›¸å…³æ–‡æ¡£</strong>ã€‚</p><hr><a id="more"></a><h1 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a><strong>æ€ç»´å¯¼å›¾</strong></h1><p><img src="/images/Go-Micro.png" alt="Go-Micro Mindmap"></p><h1 id="ç›¸å…³æ–‡æ¡£"><a href="#ç›¸å…³æ–‡æ¡£" class="headerlink" title="ç›¸å…³æ–‡æ¡£"></a><strong>ç›¸å…³æ–‡æ¡£</strong></h1><ul><li><a href="https://learnku.com/docs/go-micro/1.x" target="_blank" rel="noopener">Go Micro ä¸­æ–‡æ–‡æ¡£</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤‡ä»½è®°å½• &lt;code&gt;Go-Micro&lt;/code&gt; çš„&lt;strong&gt;æ€ç»´å¯¼å›¾&lt;/strong&gt;å’Œ&lt;strong&gt;ç›¸å…³æ–‡æ¡£&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Mind Map" scheme="http://yoursite.com/categories/Mind-Map/"/>
    
    
    <category term="Golang" scheme="http://yoursite.com/tags/Golang/"/>
    
    <category term="Go-Micro" scheme="http://yoursite.com/tags/Go-Micro/"/>
    
  </entry>
  
  <entry>
    <title>#Gorm# æ€ç»´å¯¼å›¾ï¼šGorm Object Relational Mapping Library</title>
    <link href="http://yoursite.com/2021/05/02/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BGorm/"/>
    <id>http://yoursite.com/2021/05/02/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BGorm/</id>
    <published>2021-05-01T23:00:21.000Z</published>
    <updated>2021-06-25T07:03:20.368Z</updated>
    
    <content type="html"><![CDATA[<p>å¤‡ä»½è®°å½• <code>Gorm</code> çš„<strong>æ€ç»´å¯¼å›¾</strong>å’Œ<strong>ç›¸å…³æ–‡æ¡£</strong>ã€‚</p><hr><a id="more"></a><h1 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a><strong>æ€ç»´å¯¼å›¾</strong></h1><p><img src="/images/Gorm.png" alt="Gorm Mindmap"></p><h1 id="ç›¸å…³æ–‡æ¡£"><a href="#ç›¸å…³æ–‡æ¡£" class="headerlink" title="ç›¸å…³æ–‡æ¡£"></a><strong>ç›¸å…³æ–‡æ¡£</strong></h1><ul><li><a href="https://learnku.com/docs/gorm/v2" target="_blank" rel="noopener">Gorm ä¸­æ–‡æ–‡æ¡£</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤‡ä»½è®°å½• &lt;code&gt;Gorm&lt;/code&gt; çš„&lt;strong&gt;æ€ç»´å¯¼å›¾&lt;/strong&gt;å’Œ&lt;strong&gt;ç›¸å…³æ–‡æ¡£&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Mind Map" scheme="http://yoursite.com/categories/Mind-Map/"/>
    
    
    <category term="Golang" scheme="http://yoursite.com/tags/Golang/"/>
    
    <category term="Gin" scheme="http://yoursite.com/tags/Gin/"/>
    
  </entry>
  
  <entry>
    <title>#Gin# æ€ç»´å¯¼å›¾ï¼šGin Web Framework</title>
    <link href="http://yoursite.com/2021/05/01/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BGin/"/>
    <id>http://yoursite.com/2021/05/01/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E4%B9%8BGin/</id>
    <published>2021-04-30T23:00:21.000Z</published>
    <updated>2021-06-25T06:53:21.881Z</updated>
    
    <content type="html"><![CDATA[<p>å¤‡ä»½è®°å½• <code>Gin</code> çš„<strong>æ€ç»´å¯¼å›¾</strong>å’Œ<strong>ç›¸å…³æ–‡æ¡£</strong>ã€‚</p><hr><a id="more"></a><h1 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a><strong>æ€ç»´å¯¼å›¾</strong></h1><p><img src="/images/Gin.png" alt="Gin Mindmap"></p><h1 id="ç›¸å…³æ–‡æ¡£"><a href="#ç›¸å…³æ–‡æ¡£" class="headerlink" title="ç›¸å…³æ–‡æ¡£"></a><strong>ç›¸å…³æ–‡æ¡£</strong></h1><ul><li><a href="https://learnku.com/docs/gin-gonic/2019" target="_blank" rel="noopener">Gin æ¡†æ¶ä¸­æ–‡æ–‡æ¡£</a></li></ul><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¤‡ä»½è®°å½• &lt;code&gt;Gin&lt;/code&gt; çš„&lt;strong&gt;æ€ç»´å¯¼å›¾&lt;/strong&gt;å’Œ&lt;strong&gt;ç›¸å…³æ–‡æ¡£&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Mind Map" scheme="http://yoursite.com/categories/Mind-Map/"/>
    
    
    <category term="Golang" scheme="http://yoursite.com/tags/Golang/"/>
    
    <category term="Gin" scheme="http://yoursite.com/tags/Gin/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# é˜…è¯»ã€Šæ’ä¸°é“¶è¡Œåˆ†å¸ƒå¼æ ¸å¿ƒç³»ç»Ÿ - API ç½‘å…³ æŠ€æœ¯åŸå‹è½åœ°å®è·µã€‹ç¬”è®°</title>
    <link href="http://yoursite.com/2021/04/07/%E6%81%92%E4%B8%B0%E9%93%B6%E8%A1%8C%E5%88%86%E5%B8%83%E5%BC%8F%E6%A0%B8%E5%BF%83%E7%B3%BB%E7%BB%9F%20-%20API%20%E7%BD%91%E5%85%B3%E6%8A%80%E6%9C%AF%E5%8E%9F%E5%9E%8B%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/"/>
    <id>http://yoursite.com/2021/04/07/%E6%81%92%E4%B8%B0%E9%93%B6%E8%A1%8C%E5%88%86%E5%B8%83%E5%BC%8F%E6%A0%B8%E5%BF%83%E7%B3%BB%E7%BB%9F%20-%20API%20%E7%BD%91%E5%85%B3%E6%8A%80%E6%9C%AF%E5%8E%9F%E5%9E%8B%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/</id>
    <published>2021-04-06T23:00:21.000Z</published>
    <updated>2021-04-23T08:10:23.669Z</updated>
    
    <content type="html"><![CDATA[<p><em>èµµæ¯…,å¼ æ¶›.æ’ä¸°é“¶è¡Œåˆ†å¸ƒå¼æ ¸å¿ƒç³»ç»Ÿ-APIç½‘å…³æŠ€æœ¯åŸå‹è½åœ°å®è·µ[J].ä¸­å›½é‡‘èç”µè„‘,2017(04):48-55.</em></p><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><p><img src="/images/paper_xmind_5.png" alt="paper mindmap"></p><p>é˜…è¯»æœ¬è®ºæ–‡åï¼Œ<strong>ä¸»è¦è®¨è®ºä»¥ä¸‹ä¸¤ç‚¹</strong>ï¼š</p><ol><li>æ’ä¸°é“¶è¡Œ API ç½‘å…³æŠ€æœ¯æ¶æ„</li><li>æ’ä¸°é“¶è¡Œ API ç½‘å…³è®¾è®¡äº®ç‚¹</li></ol><h2 id="æŠ€æœ¯æ¶æ„"><a href="#æŠ€æœ¯æ¶æ„" class="headerlink" title="æŠ€æœ¯æ¶æ„"></a><strong>æŠ€æœ¯æ¶æ„</strong></h2><p><img src="/images/paper_arch_5.png" alt="paper overall architecture"></p><p><img src="/images/paper_arch_6.png" alt="paper internal architecture"></p><ul><li><strong>Java SPI</strong>ï¼šå®é™…æ˜¯â€œåŸºäºæ¥å£çš„ç¼–ç¨‹ï¼‹ç­–ç•¥æ¨¡å¼ï¼‹é…ç½®æ–‡ä»¶â€çš„åŠ¨æ€åŠ è½½æœºåˆ¶ã€‚</li><li><strong>Filter-PRPE</strong>ï¼šæ¨¡å‹ä¸º â€œPRE -&gt; ROUTING -&gt; POST -&gt; ERRORâ€ çš„è´£ä»»é“¾æœºåˆ¶ã€‚</li></ul><p><img src="/images/config_data_structure.png" alt="config data structure design"></p><ul><li><strong>File System</strong>ï¼šæä¾›äº†ç½‘å…³å¯åŠ¨æ‰€éœ€çš„ç¯å¢ƒé…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ³¨å†Œä¸­å¿ƒè¿æ¥å’Œå‚æ•°é…ç½®ã€å¤–éƒ¨ä¾èµ–è¿æ¥å’Œå‚æ•°é…ç½®ä»¥åŠé»˜è®¤çš„åŸºç¡€è§„åˆ™é…ç½®ã€‚å…¶ä¸­é»˜è®¤çš„åŸºç¡€è§„åˆ™é…ç½®å¯è¢«åŠ¨æ€åœ°æ›¿æ¢ã€‚</li><li><strong>Zookeeper</strong>ï¼šåœ¨æä¾›æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°çš„èƒ½åŠ›ä¹‹ä½™ï¼Œå¯¹é…ç½®è¿›è¡ŒæŒä¹…åŒ–å’Œè®¢é˜…é€šçŸ¥ã€‚</li></ul><blockquote><p><em>æ³¨ï¼šZookeeper æ›¿ä»£äº†ä¼ ç»Ÿçš„æ•°æ®åº“ç›´æ¥å­˜å‚¨é…ç½®ï¼ˆMySQL å’Œ MongoDB ä¸å†æ˜¯å¿…éœ€çš„ï¼‰ï¼ŒZookeeper è‡ªå¸¦çš„æ¶ˆæ¯è®¢é˜…åŠŸèƒ½ä¹Ÿè§£å†³äº†çƒ­æ›´æ–°é—®é¢˜ï¼ˆRedis å’Œ RabbitMQ ä¸å†æ˜¯å¿…éœ€çš„ï¼‰ï¼Œä¸ºäº†æé«˜è¿è¡Œæ•ˆç‡æ•°æ®å°†ç¼“å­˜åœ¨å†…å­˜ï¼Œè¿™äº›éƒ½æ˜¯éå¸¸å…·æœ‰å‚è€ƒä»·å€¼çš„åšæ³•ã€‚åŒæ—¶ï¼Œæœ¬æ–‡ä¹Ÿæå‡ºäº†åŠ¨æ€è¦†ç›–æœ¬åœ°è®¾ç½®çš„æ–°æ€è·¯ã€‚</em></p></blockquote><h2 id="è®¾è®¡äº®ç‚¹"><a href="#è®¾è®¡äº®ç‚¹" class="headerlink" title="è®¾è®¡äº®ç‚¹"></a><strong>è®¾è®¡äº®ç‚¹</strong></h2><h3 id="å¤šç»´åº¦åŠ¨æ€è·¯ç”±æœºåˆ¶"><a href="#å¤šç»´åº¦åŠ¨æ€è·¯ç”±æœºåˆ¶" class="headerlink" title="å¤šç»´åº¦åŠ¨æ€è·¯ç”±æœºåˆ¶"></a>å¤šç»´åº¦åŠ¨æ€è·¯ç”±æœºåˆ¶</h3><p><img src="/images/route_rule_model.png" alt="route rule model"></p><p><img src="/images/multi-dimension_route_mechanism.png" alt="multi-dimension route mechanism"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><blockquote><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäº Java SPI + Filter PRPE å®ç°çš„å¾®æœåŠ¡ API ç½‘å…³çš„<strong>æ¶æ„</strong>ï¼Œåœ¨æœåŠ¡/é…ç½®æ•°æ®åŠ¨æ€ç®¡ç†å’Œå¤šç»´åº¦åŠ¨æ€è·¯ç”±æœºåˆ¶è¿™ä¸¤ä¸ªæ–¹é¢ä¸ºæ¯•è®¾å·¥ä½œæä¾›äº†å®è´µçš„å‚è€ƒã€‚</p></blockquote><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;em&gt;èµµæ¯…,å¼ æ¶›.æ’ä¸°é“¶è¡Œåˆ†å¸ƒå¼æ ¸å¿ƒç³»ç»Ÿ-APIç½‘å…³æŠ€æœ¯åŸå‹è½åœ°å®è·µ[J].ä¸­å›½é‡‘èç”µè„‘,2017(04):48-55.&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# é˜…è¯»ã€Šå¾®æœåŠ¡APIç½‘å…³çš„è®¾è®¡åŠåº”ç”¨ã€‹ç¬”è®°</title>
    <link href="http://yoursite.com/2021/04/06/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8F%8A%E5%BA%94%E7%94%A8/"/>
    <id>http://yoursite.com/2021/04/06/%E5%BE%AE%E6%9C%8D%E5%8A%A1API%E7%BD%91%E5%85%B3%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8F%8A%E5%BA%94%E7%94%A8/</id>
    <published>2021-04-05T23:00:21.000Z</published>
    <updated>2021-04-22T13:46:32.754Z</updated>
    
    <content type="html"><![CDATA[<p><em>å»–ä¿Šæ°,é™¶æ™ºå‹‡.å¾®æœåŠ¡APIç½‘å…³çš„è®¾è®¡åŠåº”ç”¨[J].è‡ªåŠ¨åŒ–æŠ€æœ¯ä¸åº”ç”¨,2019,38(08):85-88.</em></p><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><p><img src="/images/paper_xmind_4.png" alt="paper mindmap"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><blockquote><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäº Spring Cloud Zuul å®ç°çš„å¾®æœåŠ¡ API ç½‘å…³çš„<strong>åº”ç”¨</strong>ï¼Œä¾§é‡å…³æ³¨åŸºäº Zuul çš„å®è·µä½¿ç”¨è€Œä¸æ˜¯åŸºäº Zuul çš„äºŒæ¬¡è®¾è®¡ï¼Œåœ¨æŠ€æœ¯æ ˆçš„ä½¿ç”¨ä¸Šä¹Ÿå­˜åœ¨ä¸åŒï¼Œæ•…å¯¹æ¯•è®¾å·¥ä½œçš„å¸®åŠ©è¾ƒå°‘ã€‚</p></blockquote><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;em&gt;å»–ä¿Šæ°,é™¶æ™ºå‹‡.å¾®æœåŠ¡APIç½‘å…³çš„è®¾è®¡åŠåº”ç”¨[J].è‡ªåŠ¨åŒ–æŠ€æœ¯ä¸åº”ç”¨,2019,38(08):85-88.&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# é˜…è¯»ã€ŠåŸºäº OpenResty å¹³å°çš„ API ç½‘å…³ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°ã€‹ç¬”è®°</title>
    <link href="http://yoursite.com/2021/04/05/%E5%9F%BA%E4%BA%8E%20OpenResty%20%E5%B9%B3%E5%8F%B0%E7%9A%84%20API%20%E7%BD%91%E5%85%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
    <id>http://yoursite.com/2021/04/05/%E5%9F%BA%E4%BA%8E%20OpenResty%20%E5%B9%B3%E5%8F%B0%E7%9A%84%20API%20%E7%BD%91%E5%85%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/</id>
    <published>2021-04-04T23:00:21.000Z</published>
    <updated>2021-04-22T13:59:52.669Z</updated>
    
    <content type="html"><![CDATA[<p><em>æ¸©é¦¨,æ¨Šå©§é›¯,ç‹å¯Œå¼º.åŸºäºOpenRestyå¹³å°çš„APIç½‘å…³ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°[J].ä¿¡æ¯åŒ–ç ”ç©¶,2020,46(03):62-68.</em></p><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><p><img src="/images/paper_xmind_3.png" alt="paper mindmap"></p><p>é˜…è¯»æœ¬è®ºæ–‡åï¼Œ<strong>ä¸»è¦è®¨è®ºä»¥ä¸‹ä¸¤ç‚¹</strong>ï¼š</p><ol><li>API ç½‘å…³è®¾è®¡</li><li>API ç½‘å…³å®ç°</li></ol><h2 id="API-ç½‘å…³è®¾è®¡"><a href="#API-ç½‘å…³è®¾è®¡" class="headerlink" title="API ç½‘å…³è®¾è®¡"></a><strong>API ç½‘å…³è®¾è®¡</strong></h2><p><img src="/images/paper_arch_4.png" alt="paper architecture"></p><h3 id="APIç½‘å…³è½¯ä»¶"><a href="#APIç½‘å…³è½¯ä»¶" class="headerlink" title="APIç½‘å…³è½¯ä»¶"></a>APIç½‘å…³è½¯ä»¶</h3><ul><li><strong>è¯»å¤š</strong>ï¼Œå®ç°å®‰å…¨è®¤è¯ã€æµé‡æ§åˆ¶ã€è¯·æ±‚é‡å†™ã€åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡å’Œç»“æœç¼“å­˜ç­‰åŠŸèƒ½ã€‚</li></ul><h3 id="APIç½‘å…³ç›‘æ§ç®¡ç†ä¸­å¿ƒ"><a href="#APIç½‘å…³ç›‘æ§ç®¡ç†ä¸­å¿ƒ" class="headerlink" title="APIç½‘å…³ç›‘æ§ç®¡ç†ä¸­å¿ƒ"></a>APIç½‘å…³ç›‘æ§ç®¡ç†ä¸­å¿ƒ</h3><ul><li><strong>å†™å¤š</strong>ï¼Œå®ç°æœåŠ¡é…ç½®ã€æ—¥å¿—ç®¡ç†ã€ç³»ç»Ÿç›‘æ§ã€APIç®¡ç†ç­‰åŠŸèƒ½ã€‚</li></ul><blockquote><p><em>æ³¨ï¼šä¸ºå®ç°æ•°æ®çš„è¯»å†™åˆ†ç¦»ï¼Œæé«˜ç½‘å…³çš„æ€§èƒ½ï¼Œç½‘å…³ä¸è¿›è¡Œæ•°æ®å¤„ç†æ“ä½œï¼Œæ•°æ®å¤„ç†ç”±ç›‘æ§ç®¡ç†ä¸­å¿ƒè´Ÿè´£ã€‚</em></p></blockquote><h3 id="æŒä¹…å±‚"><a href="#æŒä¹…å±‚" class="headerlink" title="æŒä¹…å±‚"></a>æŒä¹…å±‚</h3><ul><li>Redisï¼šç¼“å­˜é…ç½®å’Œç»“æœã€åˆ†å¸ƒå¼é™æµç­‰</li><li>MongoDBï¼šå­˜å‚¨æ ¸å¿ƒå±‚çš„æ•°æ®</li><li>MySQLï¼šå­˜å‚¨ç®¡ç†å±‚å’Œç›‘æ§å±‚çš„æ•°æ®</li><li>Zookeeperï¼šæœåŠ¡å‘ç°ä¸æœåŠ¡æ³¨å†Œ</li></ul><blockquote><p><em>æ³¨ï¼šç”±äºä½œè€…å¯¹æ•°æ®åŒæ­¥å’Œæ¶ˆæ¯è®¢é˜…æ²¡æœ‰è¯¦ç»†å±•å¼€è®¨è®ºï¼Œä¸ªäººç›´è§‚æ„Ÿè§‰è®¾è®¡å¾—æœ‰ç‚¹è¿‡å¤æ‚äº†ã€‚</em></p><p><strong><u>æœ¬æ–‡çš„</u></strong>æ¶æ„è®¾è®¡ä¼šæ¶‰åŠä¸‰æ¬¡æ•°æ®åŒæ­¥å’Œæ¶ˆæ¯è®¢é˜…ï¼Œä¸€æ˜¯ Zookeeper å’Œ MySQL ä¹‹é—´ï¼ŒäºŒæ˜¯ MySQL å’Œ MongoDB ä¹‹é—´ï¼Œä¸‰æ˜¯ MongoDB å’Œ Redis ä¹‹é—´ã€‚<strong><u>æ¯•è®¾çš„</u></strong>æ¶æ„è®¾è®¡åªæ¶‰åŠä¸€æ¬¡æ•°æ®åŒæ­¥å’Œæ¶ˆæ¯è®¢é˜…ï¼Œå³ä¸º MySQL å’Œ Redis ä¹‹é—´ã€‚</p><ul><li>å¼•å…¥ Zookeeper å®ç°æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°ï¼Œä¸å¯ç®€åŒ–ï¼›MySQL å’Œ MongoDB ä¹‹é—´å¯ä»¥äºŒè€…é€‰ä¸€ï¼ŒMySQL æä¾›å¾ˆå¥½çš„äº‹åŠ¡æ€§æ”¯æŒï¼ŒMongoDB æ›´å¿«é€Ÿå’Œæ˜“ç”¨ï¼Œä¸¤è€…å¤‡ä»½éƒ½æœ‰è¾ƒæˆç†Ÿçš„æ–¹æ¡ˆï¼›Redis éœ€è¦ç”¨ä½œç¼“å­˜ä¸é™æµï¼Œä¸å¯ç®€åŒ–ã€‚</li><li>Zookeeper å’Œ MySQL ä¹‹é—´å¯ä¸åŒæ­¥ï¼Œå› ä¸ºé…ç½®é—´æœ‰å®ä½“æ˜ å°„å…³ç³»ï¼›MySQL å’Œ Redis ä¹‹é—´å¿…é¡»åŒæ­¥ï¼Œä»¥æé«˜ç½‘å…³è®¿é—®æ€§èƒ½å’Œå®ç°é…ç½®çƒ­æ›´æ–°ã€‚</li></ul></blockquote><h2 id="API-ç½‘å…³å®ç°"><a href="#API-ç½‘å…³å®ç°" class="headerlink" title="API ç½‘å…³å®ç°"></a><strong>API ç½‘å…³å®ç°</strong></h2><p><img src="/images/paper_flowchart_2.png" alt="paper flowchart"></p><h3 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h3><ul><li>ä½¿ç”¨ Redis ä½œä¸ºå…¨å±€çš„åˆ†å¸ƒå¼è®¡æ•°å™¨ã€‚</li><li>ä¸šåŠ¡å±‚é¢ï¼Œè®¾å‘¨æœŸä¸º <code>t</code> å’Œ é˜ˆå€¼ä¸º <code>d</code>ï¼Œåˆ™ TPS ä¸º <code>d/t</code>ï¼›æŠ€æœ¯å±‚é¢ï¼ŒRedis åˆ›å»ºä¸€ä¸ªå­˜å‚¨è®¿é—®çš„é”®ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´ä¸º <code>t</code>ï¼Œå½“å€¼è¾¾åˆ° <code>d</code> åˆ™è§¦å‘è‡ªåŠ¨å‘Šè­¦æˆ–ç†”æ–­é™çº§ã€‚</li></ul><h3 id="æœåŠ¡å…œåº•"><a href="#æœåŠ¡å…œåº•" class="headerlink" title="æœåŠ¡å…œåº•"></a>æœåŠ¡å…œåº•</h3><ul><li>ä¸æµé‡æ§åˆ¶ç›¸ç»“åˆï¼Œä¿è¯ä¸Šæ¸¸çš„æ•°æ®æœåŠ¡æ°¸ä¸æ¶ˆå¤±ã€‚</li><li>ä¸¤ç§å®ç°æ–¹å¼ï¼šä¸€æ˜¯è§¦å‘é™æµåè¯·æ±‚é‡å®šå‘åˆ° <code>fallback</code> è¿‡ç¨‹ä¸­å¤„ç†ï¼Œå¯ä»¥ä¸»åŠ¨å‘èµ·äºŒæ¬¡è¯·æ±‚è·å–å…œåº•æ•°æ®ï¼Œè¿™ç§åšæ³•éœ€å¼•å…¥é¢å¤–çš„å›è°ƒé€»è¾‘ï¼Œä½†æ•°æ®å’Œåç«¯æœåŠ¡æ˜¯ä¿æŒä¸€è‡´çš„ï¼›äºŒæ˜¯ä»ç¼“å­˜ä¸­è¯»å–å“åº”æ•°æ®ï¼Œè¿™ç§åšæ³•ä¸èƒ½ä¿è¯æ•°æ®ä¸€è‡´ï¼Œä½†æ˜¯é€Ÿåº¦å¿«ä¸”æ”¹åŠ¨å°ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><blockquote><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäº OpenResty å®ç°çš„å¾®æœåŠ¡ API ç½‘å…³çš„<strong>æ¶æ„</strong>ï¼Œåœ¨æ‹†åˆ†æœåŠ¡ã€æ•°æ®åº“çš„é€‰å‹ã€æ•°æ®åŒæ­¥å’Œæ¶ˆæ¯è®¢é˜…è¿™ä¸‰ä¸ªæ–¹é¢ä¸ºæ¯•è®¾å·¥ä½œæä¾›äº†å®è´µçš„å‚è€ƒã€‚</p></blockquote><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;em&gt;æ¸©é¦¨,æ¨Šå©§é›¯,ç‹å¯Œå¼º.åŸºäºOpenRestyå¹³å°çš„APIç½‘å…³ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°[J].ä¿¡æ¯åŒ–ç ”ç©¶,2020,46(03):62-68.&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# é˜…è¯»ã€ŠManagement of API Gateway Based on Micro-service Architectureã€‹ç¬”è®°</title>
    <link href="http://yoursite.com/2021/04/04/Management%20of%20API%20Gateway%20Based%20on%20Micro-service%20Architecture/"/>
    <id>http://yoursite.com/2021/04/04/Management%20of%20API%20Gateway%20Based%20on%20Micro-service%20Architecture/</id>
    <published>2021-04-03T23:00:21.000Z</published>
    <updated>2021-04-22T13:46:53.747Z</updated>
    
    <content type="html"><![CDATA[<p><em>Zhao, J &amp; Jing, S &amp; Jiang, L. (2018). Management of API Gateway Based on Micro-service Architecture. Journal of Physics: Conference Series. 1087. 032032. 10.1088/1742-6596/1087/3/032032.</em></p><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><p><img src="/images/paper_xmind_1.png" alt="paper mindmap"></p><p>é˜…è¯»æœ¬è®ºæ–‡åï¼Œ<strong>ä¸»è¦è®¨è®ºä»¥ä¸‹å››ç‚¹</strong>ï¼š</p><ol><li>åº”ç”¨æ¶æ„å›¾ç¤ºåŠåˆ†æ</li><li>èº«ä»½è®¤è¯ä»¤ç‰Œé€‰æ‹©</li><li>ä¿¡æ¯åŠ è½½çš„çƒ­æ›´æ–°è§£å†³æ–¹æ¡ˆ</li><li>åˆ†å¸ƒå¼çš„æµé‡æ§åˆ¶</li></ol><h2 id="åº”ç”¨æ¶æ„"><a href="#åº”ç”¨æ¶æ„" class="headerlink" title="åº”ç”¨æ¶æ„"></a><strong>åº”ç”¨æ¶æ„</strong></h2><p><img src="/images/paper_arch_1.png" alt="paper architecture"></p><h3 id="ä»£ç†æœåŠ¡"><a href="#ä»£ç†æœåŠ¡" class="headerlink" title="ä»£ç†æœåŠ¡"></a>ä»£ç†æœåŠ¡</h3><h4 id="Nginx-æ¥å…¥å±‚"><a href="#Nginx-æ¥å…¥å±‚" class="headerlink" title="Nginx æ¥å…¥å±‚"></a>Nginx æ¥å…¥å±‚</h4><ul><li>ä»£ç†æµé‡çš„ç»Ÿä¸€å…¥å£ã€‚</li></ul><h4 id="Lua-è„šæœ¬é›†"><a href="#Lua-è„šæœ¬é›†" class="headerlink" title="Lua è„šæœ¬é›†"></a>Lua è„šæœ¬é›†</h4><ul><li>æ”¯æŒæ‰©å±•å„é¡¹ä¸­é—´ä»¶åŠŸèƒ½ï¼Œå¦‚ï¼šæƒé™è®¤è¯ã€è´Ÿè½½å‡è¡¡ã€æµé‡æ§åˆ¶ã€å­˜å‚¨æ—¥å¿—ã€è¯·æ±‚é‡å†™å’Œåå‘ä»£ç†ç­‰ã€‚ä¸â€œç®¡ç†æœåŠ¡-ä¸šåŠ¡é€»è¾‘å±‚â€çš„åŠŸèƒ½ç›¸å¯¹åº”ã€‚</li></ul><h3 id="ç®¡ç†æœåŠ¡"><a href="#ç®¡ç†æœåŠ¡" class="headerlink" title="ç®¡ç†æœåŠ¡"></a>ç®¡ç†æœåŠ¡</h3><h4 id="API-æ¥å…¥å±‚"><a href="#API-æ¥å…¥å±‚" class="headerlink" title="API æ¥å…¥å±‚"></a>API æ¥å…¥å±‚</h4><ul><li>ç®¡ç†æ¥å£çš„ç»Ÿä¸€å…¥å£ã€‚</li></ul><h4 id="ä¸šåŠ¡é€»è¾‘å±‚"><a href="#ä¸šåŠ¡é€»è¾‘å±‚" class="headerlink" title="ä¸šåŠ¡é€»è¾‘å±‚"></a>ä¸šåŠ¡é€»è¾‘å±‚</h4><ul><li>æ”¯æŒæ‰©å±•å„é¡¹ä¸šåŠ¡å±‚åŠŸèƒ½ï¼Œå¦‚ï¼šæ¥å£é…ç½®ä¿¡æ¯ã€æƒé™è®¤è¯ç®¡ç†ã€æµé‡æ§åˆ¶ç®¡ç†ã€ç³»ç»ŸçŠ¶æ€ç›‘æ§ã€ç³»ç»Ÿæ•°æ®ç»Ÿè®¡å’Œè¯·æ±‚é‡å†™é…ç½®ç­‰ã€‚ä¸â€œä»£ç†æœåŠ¡-Lua è„šæœ¬é›†â€çš„åŠŸèƒ½ç›¸å¯¹åº”ã€‚</li></ul><h3 id="è®¤è¯ä¸­å¿ƒ"><a href="#è®¤è¯ä¸­å¿ƒ" class="headerlink" title="è®¤è¯ä¸­å¿ƒ"></a>è®¤è¯ä¸­å¿ƒ</h3><ul><li>ç”¨äºæä¾› OAuth 2 + JWT è®¤è¯åŠŸèƒ½ã€‚</li></ul><h3 id="æ³¨å†Œä¸­å¿ƒ"><a href="#æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="æ³¨å†Œä¸­å¿ƒ"></a>æ³¨å†Œä¸­å¿ƒ</h3><ul><li>ç”¨äºæä¾›æœåŠ¡å‘ç°ä¸æœåŠ¡æ³¨å†ŒåŠŸèƒ½ã€‚</li></ul><h3 id="æŒä¹…å±‚"><a href="#æŒä¹…å±‚" class="headerlink" title="æŒä¹…å±‚"></a>æŒä¹…å±‚</h3><h4 id="Redis-é›†ç¾¤"><a href="#Redis-é›†ç¾¤" class="headerlink" title="Redis é›†ç¾¤"></a>Redis é›†ç¾¤</h4><ul><li>ä½œåˆ†å¸ƒå¼é™æµçš„è®¡æ•°å™¨ï¼›</li><li>ç¼“å­˜å“åº”è¯·æ±‚ç»“æœã€‚</li></ul><h4 id="MySQL-é›†ç¾¤"><a href="#MySQL-é›†ç¾¤" class="headerlink" title="MySQL é›†ç¾¤"></a>MySQL é›†ç¾¤</h4><ul><li>ä¸»è¦ç”¨äºå­˜å‚¨æµé‡æ§åˆ¶ä¿¡æ¯ã€‚</li></ul><blockquote><p><em>æ³¨ï¼šä½œè€…æ²¡æœ‰è¿›ä¸€æ­¥é˜è¿°ä¸ºä»€ä¹ˆæœåŠ¡é…ç½®ä¿¡æ¯å’Œæµé‡æ§åˆ¶ä¿¡æ¯è¦åˆ†å¼€ä¸åŒç±»å‹çš„æ•°æ®åº“é›†ç¾¤å­˜å‚¨ã€‚</em></p></blockquote><h4 id="MongoDB-é›†ç¾¤"><a href="#MongoDB-é›†ç¾¤" class="headerlink" title="MongoDB é›†ç¾¤"></a>MongoDB é›†ç¾¤</h4><ul><li>ä¸»è¦ç”¨äºå­˜å‚¨æœåŠ¡é…ç½®ä¿¡æ¯ã€‚</li></ul><h2 id="èº«ä»½è®¤è¯"><a href="#èº«ä»½è®¤è¯" class="headerlink" title="èº«ä»½è®¤è¯"></a><strong>èº«ä»½è®¤è¯</strong></h2><p><u><strong>æœ¬æ–‡å°†</strong></u>é‡‡ç”¨ OAuth 2 + JWT ç»„åˆã€‚OAuth 2 å¼•å…¥äº†è®¤è¯æœåŠ¡å™¨å’Œèµ„æºæœåŠ¡å™¨çš„æ¦‚å¿µåŒºåˆ†ï¼ŒOAuth 2 åè®®å¯ä»¥æºå¸¦ç”¨æˆ·ä¿¡æ¯å’Œæƒé™ä¿¡æ¯çš„ç‰¹å¾ï¼›JWT æ˜¯åŒ…å«èº«ä»½ä¿¡æ¯å’Œè¿‡æœŸæ—¶é—´çš„åŠ å¯†ä»¤ç‰Œï¼Œä»¥å‡å°‘æ•°æ®åº“çš„è®¿é—®ã€‚ä¸¤è€…ç»“åˆä½¿ç”¨å¯ä»¥å®ç°è®¤è¯å’Œé‰´æƒã€‚</p><p><img src="/images/oauth.png" alt="OAuth Auth"></p><p><u><strong>æ¯•è®¾å°†</strong></u>é‡‡ç”¨ JWT ä»¤ç‰Œï¼Œå‡ºäºç®€åŒ–çš„ç›®çš„å»é™¤äº† OAuthï¼Œæ›´æ¥è¿‘åŸæ–‡ä¸­æ‰€æåŠçš„ AppKeys ï¼Œä¹Ÿå¯ä»¥åŸºæœ¬æ»¡è¶³å½“å‰çš„éœ€æ±‚ã€‚AppKeys èº«ä»½è®¤è¯æ¨¡å¼æ›´é€‚åˆå¼€æ”¾æœåŠ¡çš„åœºæ™¯ï¼Œå®ƒä¸æ¶‰åŠç”¨æˆ·ä¿¡æ¯å’Œæƒé™ä¿¡æ¯ã€‚</p><p><img src="/images/appkeys.png" alt="AppKeys Auth"></p><h2 id="ä¿¡æ¯åŠ è½½"><a href="#ä¿¡æ¯åŠ è½½" class="headerlink" title="ä¿¡æ¯åŠ è½½"></a><strong>ä¿¡æ¯åŠ è½½</strong></h2><p><u><strong>æœ¬æ–‡çš„</strong></u>å¤„ç†æ–¹å¼æ˜¯ï¼šå…ˆä» Nginx Cache ä¸­è¯»ï¼Œå†ä» MongoDB ä¸­è¯»ï¼Œå¦åˆ™åˆ¤æ–­ä¸ºéæ³•çš„è¯·æ±‚ã€‚Nginx æ˜¯è‡ªå®šä¹‰ç½‘å…³æŠ€æœ¯çš„å¸¸è§åŸºçŸ³ï¼›MongoDB ä½œä¸ºæ–‡æ¡£å‹æ•°æ®åº“åœ¨ä¿®æ”¹æœåŠ¡é…ç½®ä¿¡æ¯ä¸Šååˆ†æ–¹ä¾¿ã€‚</p><p><u><strong>æ¯•è®¾çš„</strong></u>å¤„ç†æ–¹å¼æ˜¯ï¼šå…ˆä» Redis ä¸­è¯»ï¼Œå†ä» MySQL ä¸­è¯»ï¼Œå¦åˆ™åˆ¤æ–­ä¸ºéæ³•çš„è¯·æ±‚ã€‚Redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å†…å­˜é”®å€¼æ•°æ®åº“ï¼Œå¾ˆé€‚åˆç”¨ä½œä¸ºç¼“å­˜ï¼›MySQL ä½œä¸ºå…³ç³»å‹æ•°æ®åº“ï¼Œå¯ä»¥æ›´å¥½åœ°æŠ½è±¡å’Œç®¡ç†æœåŠ¡ä¿¡æ¯ã€è®¿é—®æ§åˆ¶ã€è´Ÿè½½å‡è¡¡å’Œç§Ÿæˆ·ä¿¡æ¯ç­‰å®ä½“å…³ç³»ã€‚</p><p>å°½ç®¡å¦‚æ­¤ï¼Œæ— è®ºå“ªç§æ–¹å¼éƒ½äºŸå¾…å»è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š</p><blockquote><p><em>MongoDB æ›´æ–°ä¹‹åå¦‚ä½•åˆ·æ–° Nginx Cache ï¼ŸMySQL æ›´æ–°ä¹‹åå¦‚ä½•åˆ·æ–° Redis ï¼Ÿ</em></p></blockquote><p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸ªé—®é¢˜è¿›è¡ŒæŠ½è±¡åŒ–ï¼š</p><blockquote><p>å·²çŸ¥ï¼šA æœåŠ¡å†™å¤šè¯»å°‘ï¼Œæµé‡å°ï¼›B æœåŠ¡åªè¯»ä¸å†™ï¼Œæµé‡å¤§ï¼›C æ•°æ®ç”± A æœåŠ¡å†™å…¥æ•°æ®åº“ï¼Œç”± A æœåŠ¡æˆ– B æœåŠ¡è¯»å‡ºæ•°æ®åº“ã€‚</p><p>é—®é¢˜ï¼š<strong>å¦‚ä½•ä½¿ A æœåŠ¡å’Œ B æœåŠ¡ä¹‹é—´ä¿è¯ C æ•°æ®åŒæ­¥ä¸”ä¸€è‡´ï¼ˆè¯·æ±‚ä¸èƒ½ç›´æ¥æ‰“åˆ°åº•å±‚çš„æ•°æ®åº“ï¼‰å‘¢ï¼Ÿ</strong></p><p><img src="/images/paper_flowchart_1.png" alt="paper flowchart"></p></blockquote><p>è¿›è¡Œå¤´è„‘é£æš´ä¹‹åï¼Œè§£å†³çš„æ€è·¯æœ‰ï¼š</p><ol><li><strong>ç®¡ç†æœåŠ¡åŒæ­¥æ›´æ–°ä»£ç†æœåŠ¡</strong>ï¼šä»£ç†æœåŠ¡æä¾›é…ç½®ä¸‹å‘æ¥å£ï¼Œç®¡ç†æœåŠ¡å˜æ›´æ—¶è°ƒç”¨è¯¥æ¥å£ï¼Œä»£ç†æœåŠ¡åœ¨å†…å­˜ä¸­é‡æ–°åŒæ­¥ç®¡ç†æœåŠ¡é…ç½®æ•°æ®ã€‚ç¼ºç‚¹ï¼šä»£ç†æœåŠ¡å’Œç®¡ç†æœåŠ¡å¼ºè€¦åˆï¼›é…ç½®ä¸‹å‘æ€§èƒ½æŸè€—ã€‚</li><li><strong>ç®¡ç†æœåŠ¡å¼‚æ­¥æ›´æ–°ä»£ç†æœåŠ¡</strong>ï¼šä»£ç†æœåŠ¡å¼€å¯å¼‚æ­¥å®šæ—¶ä»»åŠ¡ï¼Œç®¡ç†æœåŠ¡ç›´æ¥å˜æ›´ï¼Œä»£ç†æœåŠ¡åœ¨å†…å­˜ä¸­å‘¨æœŸåŒæ­¥ç®¡ç†æœåŠ¡é…ç½®æ•°æ®ã€‚ç¼ºç‚¹ï¼šæ•°æ®ä¸€è‡´æ€§è¾ƒå·®ã€‚</li><li><strong>MySQL ä¸»ä»å¤åˆ¶å®ç°è¯»å†™åˆ†ç¦»</strong>ï¼šä¸»åº“å†™ä»åº“è¯»ï¼Œä¸»åº“å†™æ—¶è¦è§£é”ï¼Œä»åº“è¯»æ—¶ä¸åŠ é”ã€‚ç¼ºç‚¹ï¼šè¯·æ±‚ç›´æ¥ä¼šæ‰“åˆ°æ•°æ®åº“ï¼Œå¹¶å‘è¦æ±‚å¯èƒ½è¢«æ»¡è¶³ï¼Œä½†æ¯”å†…å­˜æ•°æ®åº“çš„è¯·æ±‚æ—¶é—´ä¼šé•¿ã€‚</li><li><strong>ä» MySQL åŒæ­¥æ•°æ®è‡³ Redis</strong>ï¼šå¢åˆ æ”¹ MySQL æ—¶ï¼Œåˆ é™¤ Redis å¯¹åº”çš„è®°å½•ï¼›æŸ¥ Redis æ—¶ï¼Œå¦‚æœå‘½ä¸­ç«‹å³è¿”å›ï¼Œæ²¡æœ‰å‘½ä¸­æŸ¥ MySQL å¹¶å›å†™åˆ° Redisã€‚ç¼ºç‚¹ï¼šéœ€è¦è€ƒè™‘ç¼“å­˜ç©¿é€ã€å‡»ç©¿å’Œé›ªå´©ç­‰é—®é¢˜ã€‚</li><li><strong>å¼•å…¥ RabbitMQ è§£è€¦</strong>ï¼šè§‚å¯Ÿä¸è®¢é˜…çš„æ¨¡å¼ï¼Œç”Ÿäº§è€…çš„ MySQL å‘ç”Ÿæ”¹åŠ¨æ—¶é€šçŸ¥æ¶ˆè´¹è€…çš„ Redis ä¹Ÿå‘ç”Ÿæ”¹åŠ¨ã€‚ç¼ºç‚¹ï¼šåˆå¼•è¿›æ–°ç»„ä»¶ï¼Œè¿ç»´æˆæœ¬è¿›ä¸€æ­¥åœ°å¢å¤§ã€‚</li><li><strong>ä½¿ç”¨ Consul ä½œä¸ºé…ç½®ä¸­å¿ƒ</strong>ï¼šConsul æ—¢å¯ä»¥ä½œä¸ºæ³¨å†Œä¸­å¿ƒåˆå¯ä»¥ä½œä¸ºé…ç½®ä¸­å¿ƒï¼Œæ˜¯åˆ†å¸ƒå¼çš„é”®å€¼å‹æ•°æ®åº“ã€‚ç¼ºç‚¹ï¼šæœåŠ¡é…ç½®ä¿¡æ¯è•´å«å®ä½“å…³ç³»æ˜ å°„ï¼Œä¸æ˜¯é…ç½®ä¸­å¿ƒçš„ç»å…¸ä½¿ç”¨åœºæ™¯ã€‚</li></ol><h2 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a><strong>æµé‡æ§åˆ¶</strong></h2><p><strong><u>æœ¬æ–‡ä¸­</u></strong>ä½¿ç”¨ Redis å……å½“è®¡æ•°å™¨æ¥å®ç°é™æµï¼Œé€‚ç”¨äºåˆ†å¸ƒå¼çš„ç¯å¢ƒã€‚</p><p><strong><u>æ¯•è®¾ä¸­</u></strong>å¯ä»¥é‡‡ç”¨å®˜æ–¹åŸç”Ÿåº“ <code>golang.org/x/time/rate</code> æˆ–æ»´æ»´å¼€æºåº“ <code>github.com/didip/tollbooth</code>ï¼Œä»…é€‚ç”¨å•æœºç‰ˆçš„ç¯å¢ƒã€‚</p><p>æ˜¾ç„¶ï¼Œè€ƒè™‘åˆ°å¯æ‰©å±•æ€§ï¼Œç½‘å…³ä¼šä»¥é›†ç¾¤çš„å½¢å¼è¿›è¡Œéƒ¨ç½²ï¼Œåˆ†å¸ƒå¼é™æµæ˜¯æ›´ä¸ºåˆç†çš„ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><blockquote><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäº Nginx + Lua å®ç°çš„å¾®æœåŠ¡ API ç½‘å…³çš„<strong>æ¶æ„</strong>ï¼Œåœ¨èº«ä»½è®¤è¯ã€ä¿¡æ¯åŠ è½½å’Œæµé‡æ§åˆ¶è¿™ä¸‰ä¸ªæ–¹é¢ä¸ºæ¯•è®¾å·¥ä½œæä¾›äº†å®è´µçš„å‚è€ƒã€‚</p></blockquote><hr><p><em>è‡´è°¢ï¼š<a href="https://github.com/yuqi657" target="_blank" rel="noopener">@lyqå¤§ä½¬</a>å’Œ<a href>@då¸ˆ</a>å¯¹æœ¬æ–‡äº¦æœ‰è´¡çŒ® :D</em></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;em&gt;Zhao, J &amp;amp; Jing, S &amp;amp; Jiang, L. (2018). Management of API Gateway Based on Micro-service Architecture. Journal of Physics: Conference Series. 1087. 032032. 10.1088/1742-6596/1087/3/032032.&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
  <entry>
    <title>#Microservice# é˜…è¯»ã€Šæµ…æå¾®æœåŠ¡æ¶æ„ API ç½‘å…³çš„ä½œç”¨ã€‹ç¬”è®°</title>
    <link href="http://yoursite.com/2021/04/03/%E6%B5%85%E6%9E%90%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%20API%20%E7%BD%91%E5%85%B3%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
    <id>http://yoursite.com/2021/04/03/%E6%B5%85%E6%9E%90%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%20API%20%E7%BD%91%E5%85%B3%E7%9A%84%E4%BD%9C%E7%94%A8/</id>
    <published>2021-04-02T23:00:21.000Z</published>
    <updated>2021-04-22T13:46:26.857Z</updated>
    
    <content type="html"><![CDATA[<p><em>å§šåˆš,å´æµ·è‰,ç‹ä»é•”.æµ…æå¾®æœåŠ¡æ¶æ„APIç½‘å…³çš„ä½œç”¨[J].ä¿¡æ¯ç³»ç»Ÿå·¥ç¨‹,2020(12):16-18.</em></p><hr><a id="more"></a><h1 id="ç›®å½•-Table-of-Contents"><a href="#ç›®å½•-Table-of-Contents" class="headerlink" title="ç›®å½• Table of Contents"></a><strong>ç›®å½• Table of Contents</strong></h1><!-- toc --><hr><p><img src="/images/paper_xmind_2.png" alt="paper mindmap"></p><p>é˜…è¯»æœ¬è®ºæ–‡åï¼Œ<strong>ä¸»è¦è®¨è®ºä»¥ä¸‹ä¸¤ç‚¹</strong>ï¼š</p><ol><li>API ç½‘å…³çš„æ¶æ„</li><li>API ç½‘å…³çš„é€‰å‹</li></ol><h2 id="API-ç½‘å…³çš„æ¶æ„"><a href="#API-ç½‘å…³çš„æ¶æ„" class="headerlink" title="API ç½‘å…³çš„æ¶æ„"></a><strong>API ç½‘å…³çš„æ¶æ„</strong></h2><p><img src="/images/paper_arch_2.png" alt="paper architecture"></p><h3 id="Core"><a href="#Core" class="headerlink" title="Core"></a>Core</h3><ul><li>Coreï¼ˆæ ¸å¿ƒç½‘å…³ï¼‰ç³»ç»Ÿçš„åŠŸèƒ½ä¸»è¦æ˜¯å¯¹å®¢æˆ·è¯·æ±‚çš„æ¥æ”¶ï¼Œ å®ƒå°†è¯·æ±‚æŒ‡å‘ç»™ä¸Šå±‚çš„æœåŠ¡ç«¯ï¼Œå¹¶ä¸”ä¼šæŠŠè¿™äº›å¤„ç†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯æˆ–ä¸‹å±‚æœåŠ¡ç«¯ã€‚</li><li>å¯ä»¥ä»¥é›†ç¾¤çš„å½¢å¼éƒ¨ç½²ï¼Œéœ€è¦é¢å¤–çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œåå‘ä»£ç†è¿æ¥ä¸šåŠ¡é›†ç¾¤ã€‚</li><li><strong>å¯ä»¥å®ç°æ ¸å¿ƒçš„åŠŸèƒ½ï¼š</strong>è®¤è¯é‰´æƒã€é™æµç†”æ–­ã€è´Ÿè½½å‡è¡¡ã€åå‘ä»£ç†ã€æœåŠ¡ç¼–æ’ã€åè®®è½¬æ¢ã€æ—¥å¿—è®°å½•ã€æ•°æ®ç¼“å­˜ã€æœåŠ¡æ³¨å†Œ/å‘ç°å’Œç‰ˆæœ¬/ç°åº¦å‘å¸ƒç­‰ã€‚</li></ul><h3 id="Admin"><a href="#Admin" class="headerlink" title="Admin"></a>Admin</h3><ul><li>Adminï¼ˆç½‘å…³ç®¡ç†ï¼‰ç³»ç»Ÿè´Ÿè´£é…ç½®ç³»ç»Ÿçš„å„ç§ç­–ç•¥ï¼Œå¦‚ï¼š é™æµã€ç¼“å­˜ä»¥åŠå‘Šè­¦ç­‰åŸºç¡€ä¿¡æ¯ã€‚</li><li>å¯ä»¥ä»¥é›†ç¾¤çš„å½¢å¼éƒ¨ç½²ï¼Œä½†æ˜¯å…¥å£æ˜¯ç»Ÿä¸€çš„ã€‚</li><li><strong>å¯ä»¥å®ç°ç®¡ç†çš„åŠŸèƒ½ï¼š</strong>API å•ä¸ªç®¡ç†ã€API åˆ†ç»„ç®¡ç†ã€SDK/æ–‡æ¡£ç”Ÿæˆã€è®¿é—®é…ç½®ã€æµæ§é…ç½®ã€åè®®è½¬æ¢é…ç½®ã€æ•°æ®ç¼“å­˜é…ç½®å’Œç›‘æ§å‘Šè­¦é…ç½®ç­‰ã€‚</li></ul><h3 id="Monitor"><a href="#Monitor" class="headerlink" title="Monitor"></a>Monitor</h3><ul><li>Monitorï¼ˆç›‘æ§æ—¥å¿—ï¼‰ ç³»ç»Ÿè´Ÿè´£ç”Ÿæˆè¿ç»´ç®¡ç†æŠ¥è¡¨ç­‰ã€‚</li><li>å¯ä»¥ä»¥é›†ç¾¤çš„å½¢å¼éƒ¨ç½²ï¼Œé‡‡é›†å¯ä»¥å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œã€‚</li><li><strong>å¯ä»¥å®ç°ç›‘æ§çš„åŠŸèƒ½ï¼š</strong>æ—¥å¿—å¤„ç†ã€ç”ŸæˆæŠ¥è¡¨å’Œè‡ªåŠ¨å‘Šè­¦ç­‰ã€‚</li></ul><h3 id="æŒä¹…å±‚"><a href="#æŒä¹…å±‚" class="headerlink" title="æŒä¹…å±‚"></a>æŒä¹…å±‚</h3><ul><li><p>ç®¡ç†åº“ï¼šè®°å½•ç®¡ç†ä¿¡æ¯</p></li><li><p>æ—¥å¿—åº“ï¼šè®°å½•æ—¥å¿—ä¿¡æ¯</p></li><li><p>Redisï¼šç¼“å­˜ä¸é™æµ</p></li><li><p>Zookeeperï¼šæœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°</p></li></ul><p><img src="/images/paper_arch_3.png" alt="paper architecture"></p><h3 id="OpenResty-API-Gateway"><a href="#OpenResty-API-Gateway" class="headerlink" title="OpenResty API Gateway"></a>OpenResty API Gateway</h3><ul><li>åœ¨ OpenResty API Gateway ä¸­ä¸»è¦å®ç°å®‰å…¨ã€é™æµã€ç¼“å­˜ã€æ—¥å¿—ã€ç›‘æ§å’Œèº«ä»½è®¤è¯ç­‰åŠŸèƒ½ï¼Œå¦å¤–è¿˜å¯ä»¥å®ç°åˆ¶å®šæœåŠ¡çš„æ³¨å†Œã€è·¯ç”±é‡å†™å’Œè´Ÿè½½å‡è¡¡ç­‰ç­–ç•¥ã€‚</li></ul><h3 id="Aggr-API-Gateway"><a href="#Aggr-API-Gateway" class="headerlink" title="Aggr API Gateway"></a>Aggr API Gateway</h3><ul><li>åœ¨ Aggr API Gateway ä¸­å¯ ä»¥ä½¿ç”¨è¶…æ—¶ã€ç¼“å­˜ã€ç†”æ–­ã€é‡è¯•ã€æŸ¥è¯¢èšåˆç­‰ç­–ç•¥ã€‚</li></ul><blockquote><p><em>æ³¨ï¼šä½œè€…æ²¡æœ‰è¿›ä¸€æ­¥é˜è¿°ä¸ºä»€ä¹ˆéœ€è¦åˆ†æˆä¸¤ä¸ªç½‘å…³ï¼Œå³ OpenResty API Gateway å’Œ Aggr API Gatewayã€‚</em></p></blockquote><h2 id="API-ç½‘å…³çš„é€‰å‹"><a href="#API-ç½‘å…³çš„é€‰å‹" class="headerlink" title="API ç½‘å…³çš„é€‰å‹"></a><strong>API ç½‘å…³çš„é€‰å‹</strong></h2><h3 id="å®‰å…¨æ€§"><a href="#å®‰å…¨æ€§" class="headerlink" title="å®‰å…¨æ€§"></a>å®‰å…¨æ€§</h3><ul><li>ç”¨æˆ·å¯†ç ä½¿ç”¨åŠ ç› sha256 åŠ å¯†</li><li>ç§Ÿæˆ·å¯†é’¥ä½¿ç”¨ Md5 åŠ å¯†</li></ul><h3 id="é«˜å¯ç”¨"><a href="#é«˜å¯ç”¨" class="headerlink" title="é«˜å¯ç”¨"></a>é«˜å¯ç”¨</h3><h4 id="å¼¹æ€§ä¼¸ç¼©"><a href="#å¼¹æ€§ä¼¸ç¼©" class="headerlink" title="å¼¹æ€§ä¼¸ç¼©"></a>å¼¹æ€§ä¼¸ç¼©</h4><ul><li>k8s å‰¯æœ¬ä¼¸ç¼©</li></ul><h4 id="çƒ­æ›´æ–°"><a href="#çƒ­æ›´æ–°" class="headerlink" title="çƒ­æ›´æ–°"></a>çƒ­æ›´æ–°</h4><ul><li>MySQL å’Œ Redis åšæ•°æ®åŒæ­¥ </li></ul><h4 id="å®¹ç¾å¤‡ä»½"><a href="#å®¹ç¾å¤‡ä»½" class="headerlink" title="å®¹ç¾å¤‡ä»½"></a>å®¹ç¾å¤‡ä»½</h4><ul><li>MySQL ä¸»ä»å¤‡ä»½</li></ul><h3 id="é«˜æ€§èƒ½"><a href="#é«˜æ€§èƒ½" class="headerlink" title="é«˜æ€§èƒ½"></a>é«˜æ€§èƒ½</h3><h4 id="é«˜å¹¶å‘"><a href="#é«˜å¹¶å‘" class="headerlink" title="é«˜å¹¶å‘"></a>é«˜å¹¶å‘</h4><ul><li>gin</li></ul><h4 id="å¤§æµé‡"><a href="#å¤§æµé‡" class="headerlink" title="å¤§æµé‡"></a>å¤§æµé‡</h4><ul><li>é™æµã€ç†”æ–­ã€é™çº§</li></ul><h3 id="æ‰©å±•æ€§"><a href="#æ‰©å±•æ€§" class="headerlink" title="æ‰©å±•æ€§"></a>æ‰©å±•æ€§</h3><ul><li>ä¸­é—´ä»¶çš„æ´‹è‘±ç»“æ„</li></ul><h3 id="ç”Ÿå‘½å‘¨æœŸç®¡ç†"><a href="#ç”Ÿå‘½å‘¨æœŸç®¡ç†" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸç®¡ç†"></a>ç”Ÿå‘½å‘¨æœŸç®¡ç†</h3><p><img src="/images/api_life_cycle.png" alt="API Life Cycle"></p><ul><li>å¯å‚è€ƒ <a href="https://eng.uber.com/gatewayuberapi/" target="_blank" rel="noopener">Uber Edge Gateway</a> çš„è®¾è®¡</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><blockquote><p>æœ¬æ–‡æå‡ºäº†å¾®æœåŠ¡ API ç½‘å…³çš„é€šç”¨è®¾è®¡æ¶æ„ï¼Œå¹¶æŒ‡å‡ºåœ¨æŠ€æœ¯é€‰å‹è¿‡ç¨‹ä¸­éœ€è¦è€ƒè™‘å®‰å…¨æ€§ã€é«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€æ‰©å±•æ€§å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰é—®é¢˜ã€‚</p></blockquote><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;em&gt;å§šåˆš,å´æµ·è‰,ç‹ä»é•”.æµ…æå¾®æœåŠ¡æ¶æ„APIç½‘å…³çš„ä½œç”¨[J].ä¿¡æ¯ç³»ç»Ÿå·¥ç¨‹,2020(12):16-18.&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="Microservice" scheme="http://yoursite.com/categories/Microservice/"/>
    
    
    <category term="Microservice" scheme="http://yoursite.com/tags/Microservice/"/>
    
  </entry>
  
</feed>
